<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Gry Terapeutyczne</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow: hidden;
        }
        
        .menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: max(20px, env(safe-area-inset-top)) 20px max(20px, env(safe-area-inset-bottom));
            overflow-y: auto;
            transition: transform 0.3s;
        }
        
        .menu.hidden {
            transform: translateX(-100%);
        }
        
        .header {
            text-align: center;
            color: white;
            padding: 20px 0;
        }
        
        h1 {
            font-size: clamp(24px, 6vw, 32px);
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: clamp(13px, 3.5vw, 15px);
            opacity: 0.9;
        }
        
        .games-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 20px 0;
        }
        
        .game-btn {
            background: white;
            border: none;
            border-radius: 15px;
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            min-height: 110px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .game-btn:active {
            transform: scale(0.95);
        }
        
        .game-icon {
            font-size: clamp(32px, 8vw, 40px);
            margin-bottom: 8px;
        }
        
        .game-name {
            font-size: clamp(12px, 3vw, 14px);
            font-weight: 600;
            color: #333;
            line-height: 1.3;
        }
        
        .notice {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            font-size: clamp(12px, 3vw, 13px);
            line-height: 1.5;
            text-align: center;
        }
        
        .notice strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }
        
        .game-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
        }
        
        .game-container.active {
            display: block;
        }
        
        .game-frame {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .back-btn {
            position: fixed;
            top: max(15px, env(safe-area-inset-top, 10px));
            left: 15px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .back-btn.active {
            display: flex;
        }
        
        @media (min-width: 600px) {
            .games-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" id="backBtn" onclick="showMenu()">‚Üê</button>
    
    <div class="menu" id="menu">
        <div class="header">
            <h1>üéÆ Gry Terapeutyczne</h1>
            <p class="subtitle">Interaktywne zabawy dla dzieci</p>
        </div>
        
        <div class="notice">
            <strong>üé§ Mikrofon</strong>
            Gra "Gitara D≈∫wiƒôku" potrzebuje dostƒôpu do mikrofonu - kliknij "Zezw√≥l"!
        </div>
        
        <div class="games-grid">
            <button class="game-btn" onclick="loadGame('sledzenie')">
                <div class="game-icon">‚ú®</div>
                <div class="game-name">≈öledzenie<br>wzrokiem</div>
            </button>
            
            <button class="game-btn" onclick="loadGame('banki')">
                <div class="game-icon">ü´ß</div>
                <div class="game-name">≈Åapanie<br>baniek</div>
            </button>
            
            <button class="game-btn" onclick="loadGame('swiatla')">
                <div class="game-icon">üí°</div>
                <div class="game-name">≈öwiecƒÖce<br>≈õwiat≈Ça</div>
            </button>
            
            <button class="game-btn" onclick="loadGame('spojrzenie')">
                <div class="game-icon">üëÄ</div>
                <div class="game-name">Kontakt<br>wzrokowy</div>
            </button>
            
            <button class="game-btn" onclick="loadGame('spokoj')">
                <div class="game-icon">üåä</div>
                <div class="game-name">Strefa<br>spokoju</div>
            </button>
            
            <button class="game-btn" onclick="loadGame('slowa')">
                <div class="game-icon">üìö</div>
                <div class="game-name">Pierwsze<br>s≈Çowa</div>
            </button>
            
            <button class="game-btn" onclick="loadGame('dzwiek')">
                <div class="game-icon">üé∏</div>
                <div class="game-name">Gitara<br>D≈∫wiƒôku</div>
            </button>
        </div>
    </div>
    
    <div class="game-container" id="gameContainer">
        <iframe class="game-frame" id="gameFrame"></iframe>
    </div>
    
    <script>
        // Base64 encoded games
        const GAMES_BASE64 = {
            sledzenie: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InBsIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+xZpsZWR6ZW5pZSDFmndpYXRlxYJrYTwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDUwNTA4OwogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgY3Vyc29yOiBub25lOwogICAgICAgIH0KCiAgICAgICAgLmNvbnRhaW5lciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgd2lkdGg6IDEwMHZ3OwogICAgICAgICAgICBoZWlnaHQ6IDEwMHZoOwogICAgICAgIH0KCiAgICAgICAgLyogU3VidGxlIHN0YXJzIGJhY2tncm91bmQgKi8KICAgICAgICAuc3RhcnMgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAuc3RhciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgd2lkdGg6IDJweDsKICAgICAgICAgICAgaGVpZ2h0OiAycHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIG9wYWNpdHk6IDAuMzsKICAgICAgICAgICAgYW5pbWF0aW9uOiB0d2lua2xlIDNzIGVhc2UtaW4tb3V0IGluZmluaXRlOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyB0d2lua2xlIHsKICAgICAgICAgICAgMCUsIDEwMCUgeyBvcGFjaXR5OiAwLjI7IH0KICAgICAgICAgICAgNTAlIHsgb3BhY2l0eTogMC41OyB9CiAgICAgICAgfQoKICAgICAgICAubGlnaHQtb3JiIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB3aWR0aDogMTAwcHg7CiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCAzMCUgMzAlLCAjZmZlMDY2LCAjZmZhYTAwKTsKICAgICAgICAgICAgYm94LXNoYWRvdzogCiAgICAgICAgICAgICAgICAwIDAgNjBweCAjZmZhYTAwLAogICAgICAgICAgICAgICAgMCAwIDEwMHB4ICNmZjg4MDAsCiAgICAgICAgICAgICAgICAwIDAgMTQwcHggI2ZmNjYwMDQ0OwogICAgICAgIH0KCiAgICAgICAgLmxpZ2h0LW9yYjo6YmVmb3JlIHsKICAgICAgICAgICAgY29udGVudDogJyc7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiAtMjBweDsKICAgICAgICAgICAgbGVmdDogLTIwcHg7CiAgICAgICAgICAgIHJpZ2h0OiAtMjBweDsKICAgICAgICAgICAgYm90dG9tOiAtMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCAjZmZhYTAwMzMgMCUsIHRyYW5zcGFyZW50IDcwJSk7CiAgICAgICAgICAgIGFuaW1hdGlvbjogcHVsc2UgMnMgZWFzZS1pbi1vdXQgaW5maW5pdGU7CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIHB1bHNlIHsKICAgICAgICAgICAgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyBvcGFjaXR5OiAwLjU7IH0KICAgICAgICAgICAgNTAlIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjIpOyBvcGFjaXR5OiAwLjg7IH0KICAgICAgICB9CgogICAgICAgIC8qIFRyYWlsIGVmZmVjdCAqLwogICAgICAgIC50cmFpbCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgd2lkdGg6IDQwcHg7CiAgICAgICAgICAgIGhlaWdodDogNDBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWRlVHJhaWwgMXMgZWFzZS1vdXQgZm9yd2FyZHM7CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIGZhZGVUcmFpbCB7CiAgICAgICAgICAgIDAlIHsgb3BhY2l0eTogMC42OyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9CiAgICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHNjYWxlKDAuMyk7IH0KICAgICAgICB9CgogICAgICAgIC5jb250cm9scyB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAyMHB4OwogICAgICAgICAgICByaWdodDogMjBweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgZ2FwOiAxMHB4OwogICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgIH0KCiAgICAgICAgLmNvbnRyb2wtYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNik7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjVweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzOwogICAgICAgIH0KCiAgICAgICAgLmNvbnRyb2wtYnRuOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgfQoKICAgICAgICAuY29udHJvbC1idG4uYWN0aXZlIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDE3MCwgMCwgMC4zKTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMTcwLCAwLCAwLjUpOwogICAgICAgICAgICBjb2xvcjogI2ZmY2MwMDsKICAgICAgICB9CgogICAgICAgIC5zcGVlZC1sYWJlbCB7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBmb250LWZhbWlseTogc3lzdGVtLXVpLCBzYW5zLXNlcmlmOwogICAgICAgIH0KCiAgICAgICAgLmluZm8gewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIGJvdHRvbTogMjBweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgc2Fucy1zZXJpZjsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzdGFycyIgaWQ9InN0YXJzIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJsaWdodC1vcmIiIGlkPSJvcmIiPjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iY29udHJvbHMiPgogICAgICAgIDxidXR0b24gY2xhc3M9ImNvbnRyb2wtYnRuIiBpZD0ic2xvd0J0biI+V29sbm88L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJjb250cm9sLWJ0biBhY3RpdmUiIGlkPSJtZWRpdW1CdG4iPsWacmVkbmlvPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY29udHJvbC1idG4iIGlkPSJmYXN0QnRuIj5TenliY2llajwvYnV0dG9uPgogICAgICAgIDxkaXYgY2xhc3M9InNwZWVkLWxhYmVsIj5QcsSZZGtvxZvEhzwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iaW5mbyI+UG9kd8Ozam5lIGtsaWtuacSZY2llID0gcGXFgm55IGVrcmFuPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICAvLyBBdWRpbyBzZXR1cAogICAgICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICBsZXQgYXVkaW9DdHggPSBudWxsOwoKICAgICAgICBmdW5jdGlvbiBpbml0QXVkaW8oKSB7CiAgICAgICAgICAgIGlmICghYXVkaW9DdHgpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhdWRpb0N0eC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4LnJlc3VtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBQZW50YXRvbmljIHNjYWxlIGZvciBwbGVhc2FudCwgbm9uLWphcnJpbmcgc291bmRzCiAgICAgICAgY29uc3QgcGVudGF0b25pY05vdGVzID0gWwogICAgICAgICAgICAyNjEuNjMsIC8vIEM0CiAgICAgICAgICAgIDI5My42NiwgLy8gRDQKICAgICAgICAgICAgMzI5LjYzLCAvLyBFNAogICAgICAgICAgICAzOTIuMDAsIC8vIEc0CiAgICAgICAgICAgIDQ0MC4wMCwgLy8gQTQKICAgICAgICAgICAgNTIzLjI1LCAvLyBDNQogICAgICAgICAgICA1ODcuMzMsIC8vIEQ1CiAgICAgICAgICAgIDY1OS4yNSwgLy8gRTUKICAgICAgICBdOwoKICAgICAgICBsZXQgY3VycmVudE5vdGVJbmRleCA9IDA7CiAgICAgICAgbGV0IGxhc3ROb3RlVGltZSA9IDA7CgogICAgICAgIC8vIENvbG9ycyBmb3IgdGhlIG9yYiAtIHNtb290aCBncmFkaWVudCB0aHJvdWdoIHNwZWN0cnVtIChSR0IgdmFsdWVzKQogICAgICAgIGNvbnN0IG9yYkNvbG9ycyA9IFsKICAgICAgICAgICAgeyBtYWluOiBbMjU1LCAyMjQsIDEwMl0sIGdsb3c6IFsyNTUsIDE3MCwgMF0gfSwgICAgLy8gd2FybSB5ZWxsb3cKICAgICAgICAgICAgeyBtYWluOiBbMjU1LCAxNzAsIDEwMl0sIGdsb3c6IFsyNTUsIDExOSwgMF0gfSwgICAgLy8gb3JhbmdlCiAgICAgICAgICAgIHsgbWFpbjogWzI1NSwgMTM2LCAxNTNdLCBnbG93OiBbMjU1LCA4NSwgMTE5XSB9LCAgIC8vIGNvcmFsIHBpbmsKICAgICAgICAgICAgeyBtYWluOiBbMjIxLCAxNTMsIDI1NV0sIGdsb3c6IFsxNzAsIDg1LCAyNTVdIH0sICAgLy8gbGF2ZW5kZXIKICAgICAgICAgICAgeyBtYWluOiBbMTUzLCAxODcsIDI1NV0sIGdsb3c6IFs4NSwgMTM2LCAyNTVdIH0sICAgLy8gc29mdCBibHVlCiAgICAgICAgICAgIHsgbWFpbjogWzEzNiwgMjM4LCAyMjFdLCBnbG93OiBbNjgsIDIwNCwgMTcwXSB9LCAgIC8vIGFxdWEKICAgICAgICAgICAgeyBtYWluOiBbMTUzLCAyNTUsIDE3MF0sIGdsb3c6IFs4NSwgMjIxLCAxMTldIH0sICAgLy8gbWludCBncmVlbgogICAgICAgICAgICB7IG1haW46IFsyMjEsIDI1NSwgMTM2XSwgZ2xvdzogWzE3MCwgMjIxLCA2OF0gfSwgICAvLyBsaW1lCiAgICAgICAgXTsKICAgICAgICBsZXQgY29sb3JQb3NpdGlvbiA9IDA7IC8vIDAgdG8gKG9yYkNvbG9ycy5sZW5ndGgpIC0gY29udGludW91cyBwb3NpdGlvbgogICAgICAgIGNvbnN0IGNvbG9yU3BlZWQgPSAwLjAwMDA1OyAvLyBob3cgZmFzdCBjb2xvcnMgY2hhbmdlIC0gdmVyeSBzbG93IG5vdwoKICAgICAgICBmdW5jdGlvbiBsZXJwQ29sb3IoY29sb3IxLCBjb2xvcjIsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgIE1hdGgucm91bmQoY29sb3IxWzBdICsgKGNvbG9yMlswXSAtIGNvbG9yMVswXSkgKiB0KSwKICAgICAgICAgICAgICAgIE1hdGgucm91bmQoY29sb3IxWzFdICsgKGNvbG9yMlsxXSAtIGNvbG9yMVsxXSkgKiB0KSwKICAgICAgICAgICAgICAgIE1hdGgucm91bmQoY29sb3IxWzJdICsgKGNvbG9yMlsyXSAtIGNvbG9yMVsyXSkgKiB0KQogICAgICAgICAgICBdOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmdiVG9TdHJpbmcocmdiKSB7CiAgICAgICAgICAgIHJldHVybiBgcmdiKCR7cmdiWzBdfSwgJHtyZ2JbMV19LCAke3JnYlsyXX0pYDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJnYlRvU3RyaW5nQWxwaGEocmdiLCBhbHBoYSkgewogICAgICAgICAgICByZXR1cm4gYHJnYmEoJHtyZ2JbMF19LCAke3JnYlsxXX0sICR7cmdiWzJdfSwgJHthbHBoYX0pYDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRDb2xvcnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGluZGV4MSA9IE1hdGguZmxvb3IoY29sb3JQb3NpdGlvbikgJSBvcmJDb2xvcnMubGVuZ3RoOwogICAgICAgICAgICBjb25zdCBpbmRleDIgPSAoaW5kZXgxICsgMSkgJSBvcmJDb2xvcnMubGVuZ3RoOwogICAgICAgICAgICBjb25zdCB0ID0gY29sb3JQb3NpdGlvbiAtIE1hdGguZmxvb3IoY29sb3JQb3NpdGlvbik7CiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbWFpbjogbGVycENvbG9yKG9yYkNvbG9yc1tpbmRleDFdLm1haW4sIG9yYkNvbG9yc1tpbmRleDJdLm1haW4sIHQpLAogICAgICAgICAgICAgICAgZ2xvdzogbGVycENvbG9yKG9yYkNvbG9yc1tpbmRleDFdLmdsb3csIG9yYkNvbG9yc1tpbmRleDJdLmdsb3csIHQpCiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwbGF5Tm90ZSgpIHsKICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgaWYgKG5vdyAtIGxhc3ROb3RlVGltZSA8IDQwMCkgcmV0dXJuOyAvLyBMaW1pdCBub3RlIGZyZXF1ZW5jeQogICAgICAgICAgICBsYXN0Tm90ZVRpbWUgPSBub3c7CgogICAgICAgICAgICBpbml0QXVkaW8oKTsKCiAgICAgICAgICAgIGNvbnN0IGZyZXF1ZW5jeSA9IHBlbnRhdG9uaWNOb3Rlc1tjdXJyZW50Tm90ZUluZGV4XTsKICAgICAgICAgICAgY3VycmVudE5vdGVJbmRleCA9IChjdXJyZW50Tm90ZUluZGV4ICsgMSkgJSBwZW50YXRvbmljTm90ZXMubGVuZ3RoOwoKICAgICAgICAgICAgY29uc3Qgb3NjaWxsYXRvciA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgY29uc3QgZ2Fpbk5vZGUgPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CgogICAgICAgICAgICBvc2NpbGxhdG9yLnR5cGUgPSAnc2luZSc7CiAgICAgICAgICAgIG9zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKGZyZXF1ZW5jeSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwoKICAgICAgICAgICAgLy8gU29mdCBwaWFuby1saWtlIGVudmVsb3BlCiAgICAgICAgICAgIGdhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICBnYWluTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuMywgYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjA1KTsKICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDEsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMS41KTsKCiAgICAgICAgICAgIC8vIEFkZCBoYXJtb25pY3MgZm9yIHdhcm10aAogICAgICAgICAgICBjb25zdCBvc2MyID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICBjb25zdCBnYWluMiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgb3NjMi50eXBlID0gJ3NpbmUnOwogICAgICAgICAgICBvc2MyLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZShmcmVxdWVuY3kgKiAyLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgIGdhaW4yLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgIGdhaW4yLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAxKTsKCiAgICAgICAgICAgIG9zY2lsbGF0b3IuY29ubmVjdChnYWluTm9kZSk7CiAgICAgICAgICAgIG9zYzIuY29ubmVjdChnYWluMik7CiAgICAgICAgICAgIGdhaW4yLmNvbm5lY3QoZ2Fpbk5vZGUpOwogICAgICAgICAgICBnYWluTm9kZS5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTsKCiAgICAgICAgICAgIG9zY2lsbGF0b3Iuc3RhcnQoKTsKICAgICAgICAgICAgb3NjMi5zdGFydCgpOwogICAgICAgICAgICBvc2NpbGxhdG9yLnN0b3AoYXVkaW9DdHguY3VycmVudFRpbWUgKyAxLjUpOwogICAgICAgICAgICBvc2MyLnN0b3AoYXVkaW9DdHguY3VycmVudFRpbWUgKyAxLjUpOwogICAgICAgIH0KCiAgICAgICAgLy8gQ3JlYXRlIHN0YXJzCiAgICAgICAgY29uc3Qgc3RhcnNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnMnKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHsKICAgICAgICAgICAgY29uc3Qgc3RhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBzdGFyLmNsYXNzTmFtZSA9ICdzdGFyJzsKICAgICAgICAgICAgc3Rhci5zdHlsZS5sZWZ0ID0gTWF0aC5yYW5kb20oKSAqIDEwMCArICclJzsKICAgICAgICAgICAgc3Rhci5zdHlsZS50b3AgPSBNYXRoLnJhbmRvbSgpICogMTAwICsgJyUnOwogICAgICAgICAgICBzdGFyLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gTWF0aC5yYW5kb20oKSAqIDMgKyAncyc7CiAgICAgICAgICAgIHN0YXJzQ29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXIpOwogICAgICAgIH0KCiAgICAgICAgLy8gT3JiIG1vdmVtZW50CiAgICAgICAgY29uc3Qgb3JiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29yYicpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKTsKCiAgICAgICAgbGV0IHggPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDIgLSA1MDsKICAgICAgICBsZXQgeSA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDIgLSA1MDsKICAgICAgICBsZXQgdGFyZ2V0WCA9IHg7CiAgICAgICAgbGV0IHRhcmdldFkgPSB5OwogICAgICAgIGxldCBzcGVlZCA9IDAuMDE1OyAvLyBNZWRpdW0gc3BlZWQgZGVmYXVsdAoKICAgICAgICBjb25zdCBwYWRkaW5nID0gMTAwOwoKICAgICAgICBmdW5jdGlvbiBzZXROZXdUYXJnZXQoKSB7CiAgICAgICAgICAgIHRhcmdldFggPSBwYWRkaW5nICsgTWF0aC5yYW5kb20oKSAqICh3aW5kb3cuaW5uZXJXaWR0aCAtIHBhZGRpbmcgKiAyIC0gMTAwKTsKICAgICAgICAgICAgdGFyZ2V0WSA9IHBhZGRpbmcgKyBNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5pbm5lckhlaWdodCAtIHBhZGRpbmcgKiAyIC0gMTAwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRyYWlsKCkgewogICAgICAgICAgICBjb25zdCBjb2xvcnMgPSBnZXRDdXJyZW50Q29sb3JzKCk7CiAgICAgICAgICAgIGNvbnN0IHRyYWlsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHRyYWlsLmNsYXNzTmFtZSA9ICd0cmFpbCc7CiAgICAgICAgICAgIHRyYWlsLnN0eWxlLmxlZnQgPSAoeCArIDMwKSArICdweCc7CiAgICAgICAgICAgIHRyYWlsLnN0eWxlLnRvcCA9ICh5ICsgMzApICsgJ3B4JzsKICAgICAgICAgICAgdHJhaWwuc3R5bGUuYmFja2dyb3VuZCA9IGByYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCAke3JnYlRvU3RyaW5nQWxwaGEoY29sb3JzLmdsb3csIDAuMjUpfSAwJSwgdHJhbnNwYXJlbnQgNzAlKWA7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmFpbCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdHJhaWwucmVtb3ZlKCksIDEwMDApOwogICAgICAgIH0KCiAgICAgICAgbGV0IHRyYWlsQ291bnRlciA9IDA7CiAgICAgICAgbGV0IG5vdGVDb3VudGVyID0gMDsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlT3JiQ29sb3IoKSB7CiAgICAgICAgICAgIGNvbG9yUG9zaXRpb24gKz0gY29sb3JTcGVlZCAqIDE2OyAvLyByb3VnaGx5IHBlciBmcmFtZQogICAgICAgICAgICBpZiAoY29sb3JQb3NpdGlvbiA+PSBvcmJDb2xvcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBjb2xvclBvc2l0aW9uID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgY29sb3JzID0gZ2V0Q3VycmVudENvbG9ycygpOwogICAgICAgICAgICBjb25zdCBtYWluQ29sb3IgPSByZ2JUb1N0cmluZyhjb2xvcnMubWFpbik7CiAgICAgICAgICAgIGNvbnN0IGdsb3dDb2xvciA9IHJnYlRvU3RyaW5nKGNvbG9ycy5nbG93KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG9yYi5zdHlsZS5iYWNrZ3JvdW5kID0gYHJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgMzAlIDMwJSwgJHttYWluQ29sb3J9LCAke2dsb3dDb2xvcn0pYDsKICAgICAgICAgICAgb3JiLnN0eWxlLmJveFNoYWRvdyA9IGAKICAgICAgICAgICAgICAgIDAgMCA2MHB4ICR7Z2xvd0NvbG9yfSwKICAgICAgICAgICAgICAgIDAgMCAxMDBweCAke3JnYlRvU3RyaW5nQWxwaGEoY29sb3JzLmdsb3csIDAuNSl9LAogICAgICAgICAgICAgICAgMCAwIDE0MHB4ICR7cmdiVG9TdHJpbmdBbHBoYShjb2xvcnMuZ2xvdywgMC4yNSl9CiAgICAgICAgICAgIGA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhbmltYXRlKCkgewogICAgICAgICAgICAvLyBVcGRhdGUgY29sb3IKICAgICAgICAgICAgdXBkYXRlT3JiQ29sb3IoKTsKICAgICAgICAgICAgLy8gU21vb3RoIG1vdmVtZW50IHRvd2FyZHMgdGFyZ2V0CiAgICAgICAgICAgIGNvbnN0IGR4ID0gdGFyZ2V0WCAtIHg7CiAgICAgICAgICAgIGNvbnN0IGR5ID0gdGFyZ2V0WSAtIHk7CiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTsKCiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IDEwKSB7CiAgICAgICAgICAgICAgICBzZXROZXdUYXJnZXQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgeCArPSBkeCAqIHNwZWVkOwogICAgICAgICAgICB5ICs9IGR5ICogc3BlZWQ7CgogICAgICAgICAgICBvcmIuc3R5bGUubGVmdCA9IHggKyAncHgnOwogICAgICAgICAgICBvcmIuc3R5bGUudG9wID0geSArICdweCc7CgogICAgICAgICAgICAvLyBDcmVhdGUgdHJhaWwgZXZlcnkgZmV3IGZyYW1lcwogICAgICAgICAgICB0cmFpbENvdW50ZXIrKzsKICAgICAgICAgICAgaWYgKHRyYWlsQ291bnRlciA+IDUpIHsKICAgICAgICAgICAgICAgIGNyZWF0ZVRyYWlsKCk7CiAgICAgICAgICAgICAgICB0cmFpbENvdW50ZXIgPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBQbGF5IG5vdGUgYmFzZWQgb24gbW92ZW1lbnQKICAgICAgICAgICAgbm90ZUNvdW50ZXIrKzsKICAgICAgICAgICAgaWYgKG5vdGVDb3VudGVyID4gMzAgLyAoc3BlZWQgKiA1MCkpIHsKICAgICAgICAgICAgICAgIHBsYXlOb3RlKCk7CiAgICAgICAgICAgICAgICBub3RlQ291bnRlciA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTsKICAgICAgICB9CgogICAgICAgIC8vIFNwZWVkIGNvbnRyb2xzCiAgICAgICAgY29uc3Qgc2xvd0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbG93QnRuJyk7CiAgICAgICAgY29uc3QgbWVkaXVtQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lZGl1bUJ0bicpOwogICAgICAgIGNvbnN0IGZhc3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmFzdEJ0bicpOwoKICAgICAgICBmdW5jdGlvbiBzZXRTcGVlZChuZXdTcGVlZCwgYWN0aXZlQnRuKSB7CiAgICAgICAgICAgIHNwZWVkID0gbmV3U3BlZWQ7CiAgICAgICAgICAgIFtzbG93QnRuLCBtZWRpdW1CdG4sIGZhc3RCdG5dLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgICAgIGFjdGl2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICB9CgogICAgICAgIHNsb3dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRTcGVlZCgwLjAwOCwgc2xvd0J0bikpOwogICAgICAgIG1lZGl1bUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNldFNwZWVkKDAuMDE1LCBtZWRpdW1CdG4pKTsKICAgICAgICBmYXN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0U3BlZWQoMC4wMjUsIGZhc3RCdG4pKTsKCiAgICAgICAgLy8gU3RhcnQgYW5pbWF0aW9uCiAgICAgICAgc2V0TmV3VGFyZ2V0KCk7CiAgICAgICAgYW5pbWF0ZSgpOwoKICAgICAgICAvLyBJbml0aWFsaXplIGF1ZGlvIG9uIGZpcnN0IGludGVyYWN0aW9uCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbml0QXVkaW8sIHsgb25jZTogdHJ1ZSB9KTsKCiAgICAgICAgLy8gRnVsbHNjcmVlbgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKCkgPT4gewogICAgICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gSGFuZGxlIHJlc2l6ZQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7CiAgICAgICAgICAgIGlmICh4ID4gd2luZG93LmlubmVyV2lkdGggLSAxMDApIHggPSB3aW5kb3cuaW5uZXJXaWR0aCAtIDE1MDsKICAgICAgICAgICAgaWYgKHkgPiB3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMDApIHkgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSAxNTA7CiAgICAgICAgICAgIHNldE5ld1RhcmdldCgpOwogICAgICAgIH0pOwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=",
            banki: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InBsIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QmHFhGtpPC90aXRsZT4KICAgIDxzdHlsZT4KICAgICAgICAqIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIH0KCiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxODBkZWcsICMwYTE2MjggMCUsICMxYTJhNGEgNTAlLCAjMGExNjI4IDEwMCUpOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgc2Fucy1zZXJpZjsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICB3aWR0aDogMTAwdnc7CiAgICAgICAgICAgIGhlaWdodDogMTAwdmg7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICB9CgogICAgICAgIC8qIEJ1YmJsZSBzdHlsZXMgKi8KICAgICAgICAuYnViYmxlIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmbG9hdCBsaW5lYXIgZm9yd2FyZHM7CiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzOwogICAgICAgIH0KCiAgICAgICAgLmJ1YmJsZTpob3ZlciB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKICAgICAgICB9CgogICAgICAgIC5idWJibGU6OmJlZm9yZSB7CiAgICAgICAgICAgIGNvbnRlbnQ6ICcnOwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogMTUlOwogICAgICAgICAgICBsZWZ0OiAyMCU7CiAgICAgICAgICAgIHdpZHRoOiAzMCU7CiAgICAgICAgICAgIGhlaWdodDogMzAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNik7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgZmlsdGVyOiBibHVyKDJweCk7CiAgICAgICAgfQoKICAgICAgICAuYnViYmxlOjphZnRlciB7CiAgICAgICAgICAgIGNvbnRlbnQ6ICcnOwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogMTAlOwogICAgICAgICAgICByaWdodDogMTUlOwogICAgICAgICAgICB3aWR0aDogMTUlOwogICAgICAgICAgICBoZWlnaHQ6IDE1JTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIGZsb2F0IHsKICAgICAgICAgICAgMCUgewogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApIHJvdGF0ZSgwZGVnKTsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgNSUgewogICAgICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICA5NSUgewogICAgICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICAxMDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWShjYWxjKC0xMDB2aCAtIDE1MHB4KSkgcm90YXRlKDM2MGRlZyk7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiBQb3AgZWZmZWN0ICovCiAgICAgICAgLnBvcC1wYXJ0aWNsZSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICAgICAgYW5pbWF0aW9uOiBwb3BCdXJzdCAwLjZzIGVhc2Utb3V0IGZvcndhcmRzOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBwb3BCdXJzdCB7CiAgICAgICAgICAgIDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpOwogICAgICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICAxMDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKHZhcigtLXR4KSwgdmFyKC0tdHkpKSBzY2FsZSgwKTsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC5wb3AtcmluZyB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBib3JkZXI6IDNweCBzb2xpZDsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgIGFuaW1hdGlvbjogcmluZ0V4cGFuZCAwLjVzIGVhc2Utb3V0IGZvcndhcmRzOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyByaW5nRXhwYW5kIHsKICAgICAgICAgICAgMCUgewogICAgICAgICAgICAgICAgd2lkdGg6IDA7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDA7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIDEwMCUgewogICAgICAgICAgICAgICAgd2lkdGg6IDE1MHB4OwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxNTBweDsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qIFNjb3JlIGRpc3BsYXkgKi8KICAgICAgICAuc2NvcmUtZGlzcGxheSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAzMHB4OwogICAgICAgICAgICByaWdodDogNDBweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCk7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDsKICAgICAgICB9CgogICAgICAgIC5zY29yZS1kaXNwbGF5IC5sYWJlbCB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICB9CgogICAgICAgIC5zY29yZS1kaXNwbGF5IC5zY29yZSB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogNTZweDsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDsKICAgICAgICB9CgogICAgICAgIC8qIENvbnRyb2xzICovCiAgICAgICAgLmNvbnRyb2xzIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICBib3R0b206IDMwcHg7CiAgICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBnYXA6IDE1cHg7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDsKICAgICAgICB9CgogICAgICAgIC5jb250cm9sLWJ0biB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDI1cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICB9CgogICAgICAgIC5jb250cm9sLWJ0bjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KCiAgICAgICAgLmNvbnRyb2wtYnRuLmFjdGl2ZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTAwLCAyMDAsIDI1NSwgMC4yKTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2JhKDEwMCwgMjAwLCAyNTUsIDAuNCk7CiAgICAgICAgfQoKICAgICAgICAvKiBTcGVlZCBjb250cm9sICovCiAgICAgICAgLnNwZWVkLWNvbnRyb2wgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIGJvdHRvbTogOTBweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogMTVweDsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40KTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIH0KCiAgICAgICAgLnNwZWVkLXNsaWRlciB7CiAgICAgICAgICAgIHdpZHRoOiAxMjBweDsKICAgICAgICAgICAgaGVpZ2h0OiA2cHg7CiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgIH0KCiAgICAgICAgLnNwZWVkLXNsaWRlcjo6LXdlYmtpdC1zbGlkZXItdGh1bWIgewogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIHdpZHRoOiAxOHB4OwogICAgICAgICAgICBoZWlnaHQ6IDE4cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgxMDAsIDIwMCwgMjU1LCAwLjcpOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQoKICAgICAgICAvKiBJbmZvICovCiAgICAgICAgLmluZm8gewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMzBweDsKICAgICAgICAgICAgbGVmdDogNDBweDsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICB6LWluZGV4OiAxMDA7CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciIgaWQ9ImNvbnRhaW5lciI+PC9kaXY+CgogICAgPGRpdiBjbGFzcz0iaW5mbyI+S2xpa2FqIGJhxYRraSE8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJzY29yZS1kaXNwbGF5Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJsYWJlbCI+UMSZa25pxJl0ZSBiYcWEa2k8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzY29yZSIgaWQ9InNjb3JlIj4wPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJzcGVlZC1jb250cm9sIj4KICAgICAgICA8c3Bhbj5Xb2xubzwvc3Bhbj4KICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIGNsYXNzPSJzcGVlZC1zbGlkZXIiIGlkPSJzcGVlZFNsaWRlciIgbWluPSIxIiBtYXg9IjUiIHZhbHVlPSIyIj4KICAgICAgICA8c3Bhbj5Tenlia288L3NwYW4+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJjb250cm9scyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY29udHJvbC1idG4gYWN0aXZlIiBpZD0icGxheUJ0biI+4pa2IEdyYWo8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJjb250cm9sLWJ0biIgaWQ9InBhdXNlQnRuIj7ij7ggUGF1emE8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJjb250cm9sLWJ0biIgaWQ9InJlc2V0QnRuIj5PZCBub3dhPC9idXR0b24+CiAgICA8L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICBsZXQgYXVkaW9DdHggPSBudWxsOwoKICAgICAgICBmdW5jdGlvbiBpbml0QXVkaW8oKSB7CiAgICAgICAgICAgIGlmICghYXVkaW9DdHgpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhdWRpb0N0eC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4LnJlc3VtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7CiAgICAgICAgY29uc3Qgc2NvcmVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpOwogICAgICAgIGNvbnN0IHNwZWVkU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwZWVkU2xpZGVyJyk7CiAgICAgICAgY29uc3QgcGxheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5QnRuJyk7CiAgICAgICAgY29uc3QgcGF1c2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGF1c2VCdG4nKTsKICAgICAgICBjb25zdCByZXNldEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldEJ0bicpOwoKICAgICAgICBsZXQgc2NvcmUgPSAwOwogICAgICAgIGxldCBpc1BsYXlpbmcgPSB0cnVlOwogICAgICAgIGxldCBidWJibGVJbnRlcnZhbCA9IG51bGw7CiAgICAgICAgbGV0IHNwZWVkID0gMjsKCiAgICAgICAgLy8gQmVhdXRpZnVsIGJ1YmJsZSBjb2xvcnMgKHNlbWktdHJhbnNwYXJlbnQsIGlyaWRlc2NlbnQgbG9vaykKICAgICAgICBjb25zdCBidWJibGVDb2xvcnMgPSBbCiAgICAgICAgICAgICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsIHJnYmEoMjU1LCAxNTAsIDIwMCwgMC40KSwgcmdiYSgyMDAsIDEwMCwgMjU1LCAwLjIpKScsCiAgICAgICAgICAgICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsIHJnYmEoMTUwLCAyMDAsIDI1NSwgMC40KSwgcmdiYSgxMDAsIDE1MCwgMjU1LCAwLjIpKScsCiAgICAgICAgICAgICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsIHJnYmEoMjAwLCAyNTUsIDIwMCwgMC40KSwgcmdiYSgxMDAsIDIwMCwgMTUwLCAwLjIpKScsCiAgICAgICAgICAgICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsIHJnYmEoMjU1LCAyMjAsIDE1MCwgMC40KSwgcmdiYSgyNTUsIDE4MCwgMTAwLCAwLjIpKScsCiAgICAgICAgICAgICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsIHJnYmEoMjAwLCAxNTAsIDI1NSwgMC40KSwgcmdiYSgxNTAsIDEwMCwgMjAwLCAwLjIpKScsCiAgICAgICAgICAgICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsIHJnYmEoMTUwLCAyNTUsIDI1NSwgMC40KSwgcmdiYSgxMDAsIDIwMCwgMjAwLCAwLjIpKScsCiAgICAgICAgXTsKCiAgICAgICAgY29uc3QgcG9wQ29sb3JzID0gWwogICAgICAgICAgICAnI2ZmOTZjOCcsICcjOTZjOGZmJywgJyNjOGZmYzgnLCAnI2ZmZDg5NicsICcjYzg5NmZmJywgJyM5NmZmZmYnCiAgICAgICAgXTsKCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQnViYmxlKCkgewogICAgICAgICAgICBpZiAoIWlzUGxheWluZykgcmV0dXJuOwoKICAgICAgICAgICAgY29uc3QgYnViYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGJ1YmJsZS5jbGFzc05hbWUgPSAnYnViYmxlJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJhbmRvbSBzaXplIChiaWdnZXIgZm9yIGVhc2llciBjbGlja2luZykKICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IDYwICsgTWF0aC5yYW5kb20oKSAqIDgwOwogICAgICAgICAgICBidWJibGUuc3R5bGUud2lkdGggPSBzaXplICsgJ3B4JzsKICAgICAgICAgICAgYnViYmxlLnN0eWxlLmhlaWdodCA9IHNpemUgKyAncHgnOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUmFuZG9tIGhvcml6b250YWwgcG9zaXRpb24KICAgICAgICAgICAgYnViYmxlLnN0eWxlLmxlZnQgPSAoTWF0aC5yYW5kb20oKSAqICh3aW5kb3cuaW5uZXJXaWR0aCAtIHNpemUpKSArICdweCc7CiAgICAgICAgICAgIGJ1YmJsZS5zdHlsZS5ib3R0b20gPSAnLScgKyAoc2l6ZSArIDIwKSArICdweCc7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSYW5kb20gY29sb3IKICAgICAgICAgICAgY29uc3QgY29sb3JJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJ1YmJsZUNvbG9ycy5sZW5ndGgpOwogICAgICAgICAgICBidWJibGUuc3R5bGUuYmFja2dyb3VuZCA9IGJ1YmJsZUNvbG9yc1tjb2xvckluZGV4XTsKICAgICAgICAgICAgYnViYmxlLnN0eWxlLmJvcmRlciA9ICcycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpJzsKICAgICAgICAgICAgYnViYmxlLnN0eWxlLmJveFNoYWRvdyA9IGAKICAgICAgICAgICAgICAgIGluc2V0IDAgMCAke3NpemUvM31weCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSksCiAgICAgICAgICAgICAgICAwIDAgJHtzaXplLzR9cHggcmdiYSgxMDAsIDE1MCwgMjU1LCAwLjIpCiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGJ1YmJsZS5kYXRhc2V0LmNvbG9ySW5kZXggPSBjb2xvckluZGV4OwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQW5pbWF0aW9uIGR1cmF0aW9uIGJhc2VkIG9uIHNwZWVkCiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gKDEyIC0gc3BlZWQgKiAyKSArIE1hdGgucmFuZG9tKCkgKiAzOwogICAgICAgICAgICBidWJibGUuc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdzJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFNsaWdodCBob3Jpem9udGFsIHdvYmJsZQogICAgICAgICAgICBjb25zdCB3b2JibGUgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxMDA7CiAgICAgICAgICAgIGJ1YmJsZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS13b2JibGUnLCB3b2JibGUgKyAncHgnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENsaWNrIGhhbmRsZXIKICAgICAgICAgICAgYnViYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcG9wQnViYmxlKGJ1YmJsZSkpOwogICAgICAgICAgICAKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1YmJsZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZW1vdmUgd2hlbiBhbmltYXRpb24gZW5kcwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChidWJibGUucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgIGJ1YmJsZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZHVyYXRpb24gKiAxMDAwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBvcEJ1YmJsZShidWJibGUpIHsKICAgICAgICAgICAgaW5pdEF1ZGlvKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCByZWN0ID0gYnViYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICBjb25zdCBjZW50ZXJYID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7CiAgICAgICAgICAgIGNvbnN0IGNlbnRlclkgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjsKICAgICAgICAgICAgY29uc3QgY29sb3JJbmRleCA9IHBhcnNlSW50KGJ1YmJsZS5kYXRhc2V0LmNvbG9ySW5kZXgpOwogICAgICAgICAgICBjb25zdCBjb2xvciA9IHBvcENvbG9yc1tjb2xvckluZGV4XTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFBsYXkgcG9wIHNvdW5kCiAgICAgICAgICAgIHBsYXlQb3BTb3VuZCgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3JlYXRlIHBvcCBwYXJ0aWNsZXMKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgcGFydGljbGUuY2xhc3NOYW1lID0gJ3BvcC1wYXJ0aWNsZSc7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS53aWR0aCA9ICg1ICsgTWF0aC5yYW5kb20oKSAqIDEwKSArICdweCc7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5oZWlnaHQgPSBwYXJ0aWNsZS5zdHlsZS53aWR0aDsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLmxlZnQgPSBjZW50ZXJYICsgJ3B4JzsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLnRvcCA9IGNlbnRlclkgKyAncHgnOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IChpIC8gMTIpICogTWF0aC5QSSAqIDI7CiAgICAgICAgICAgICAgICBjb25zdCB2ZWxvY2l0eSA9IDMwICsgTWF0aC5yYW5kb20oKSAqIDUwOwogICAgICAgICAgICAgICAgcGFydGljbGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tdHgnLCBNYXRoLmNvcyhhbmdsZSkgKiB2ZWxvY2l0eSArICdweCcpOwogICAgICAgICAgICAgICAgcGFydGljbGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tdHknLCBNYXRoLnNpbihhbmdsZSkgKiB2ZWxvY2l0eSArICdweCcpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocGFydGljbGUpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBwYXJ0aWNsZS5yZW1vdmUoKSwgNjAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3JlYXRlIGV4cGFuZGluZyByaW5nCiAgICAgICAgICAgIGNvbnN0IHJpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgcmluZy5jbGFzc05hbWUgPSAncG9wLXJpbmcnOwogICAgICAgICAgICByaW5nLnN0eWxlLmJvcmRlckNvbG9yID0gY29sb3I7CiAgICAgICAgICAgIHJpbmcuc3R5bGUubGVmdCA9IChjZW50ZXJYIC0gNzUpICsgJ3B4JzsKICAgICAgICAgICAgcmluZy5zdHlsZS50b3AgPSAoY2VudGVyWSAtIDc1KSArICdweCc7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyaW5nKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByaW5nLnJlbW92ZSgpLCA1MDApOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVXBkYXRlIHNjb3JlCiAgICAgICAgICAgIHNjb3JlKys7CiAgICAgICAgICAgIHNjb3JlRWwudGV4dENvbnRlbnQgPSBzY29yZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJlbW92ZSBidWJibGUKICAgICAgICAgICAgYnViYmxlLnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcGxheVBvcFNvdW5kKCkgewogICAgICAgICAgICAvLyBTb2Z0LCBzYXRpc2Z5aW5nIHBvcCBzb3VuZAogICAgICAgICAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgIGNvbnN0IGdhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBvc2MudHlwZSA9ICdzaW5lJzsKICAgICAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSg4MDAgKyBNYXRoLnJhbmRvbSgpICogNDAwLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgyMDAsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMC4xKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjMsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjE1KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAKICAgICAgICAgICAgb3NjLnN0YXJ0KCk7CiAgICAgICAgICAgIG9zYy5zdG9wKGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMC4xNSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdGFydEJ1YmJsZXMoKSB7CiAgICAgICAgICAgIGlmIChidWJibGVJbnRlcnZhbCkgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3JlYXRlIGJ1YmJsZXMgYXQgaW50ZXJ2YWwgYmFzZWQgb24gc3BlZWQKICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSAyMDAwIC0gKHNwZWVkICogMzAwKTsKICAgICAgICAgICAgYnViYmxlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjcmVhdGVCdWJibGUsIE1hdGgubWF4KDUwMCwgaW50ZXJ2YWwpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENyZWF0ZSBmaXJzdCBidWJibGUgaW1tZWRpYXRlbHkKICAgICAgICAgICAgY3JlYXRlQnViYmxlKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdG9wQnViYmxlcygpIHsKICAgICAgICAgICAgaWYgKGJ1YmJsZUludGVydmFsKSB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGJ1YmJsZUludGVydmFsKTsKICAgICAgICAgICAgICAgIGJ1YmJsZUludGVydmFsID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXJzCiAgICAgICAgcGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgaXNQbGF5aW5nID0gdHJ1ZTsKICAgICAgICAgICAgcGxheUJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgcGF1c2VCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgICAgIHN0YXJ0QnViYmxlcygpOwogICAgICAgIH0pOwoKICAgICAgICBwYXVzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgaXNQbGF5aW5nID0gZmFsc2U7CiAgICAgICAgICAgIHBhdXNlQnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICBwbGF5QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgICAgICAgICBzdG9wQnViYmxlcygpOwogICAgICAgIH0pOwoKICAgICAgICByZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgc2NvcmUgPSAwOwogICAgICAgICAgICBzY29yZUVsLnRleHRDb250ZW50ID0gJzAnOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBidWJibGVzCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idWJibGUnKS5mb3JFYWNoKGIgPT4gYi5yZW1vdmUoKSk7CiAgICAgICAgfSk7CgogICAgICAgIHNwZWVkU2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHsKICAgICAgICAgICAgc3BlZWQgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZXN0YXJ0IHdpdGggbmV3IHNwZWVkIGlmIHBsYXlpbmcKICAgICAgICAgICAgaWYgKGlzUGxheWluZykgewogICAgICAgICAgICAgICAgc3RvcEJ1YmJsZXMoKTsKICAgICAgICAgICAgICAgIHN0YXJ0QnViYmxlcygpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIEZpcnN0IGludGVyYWN0aW9uIHRvIGluaXQgYXVkaW8KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgaW5pdEF1ZGlvKCk7CiAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pOwoKICAgICAgICAvLyBGdWxsc2NyZWVuCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoZSkgPT4gewogICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdidWJibGUnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gU3RhcnQKICAgICAgICBzdGFydEJ1YmJsZXMoKTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K",
            spojrzenie: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InBsIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UG9kxIXFvGFqIHphIFNwb2pyemVuaWVtPC90aXRsZT4KICAgIDxzdHlsZT4KICAgICAgICAqIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIH0KCiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMwYTBhMTUgMCUsICMwZjBmMWYgMTAwJSk7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBmb250LWZhbWlseTogc3lzdGVtLXVpLCBzYW5zLXNlcmlmOwogICAgICAgIH0KCiAgICAgICAgLmNvbnRhaW5lciB7CiAgICAgICAgICAgIHdpZHRoOiAxMDB2dzsKICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICB9CgogICAgICAgIC8qIENlbnRyYWwgY2hhcmFjdGVyIGZhY2UgKi8KICAgICAgICAuZmFjZS1jb250YWluZXIgewogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIHdpZHRoOiAyMDBweDsKICAgICAgICAgICAgaGVpZ2h0OiAyMDBweDsKICAgICAgICB9CgogICAgICAgIC5mYWNlIHsKICAgICAgICAgICAgd2lkdGg6IDIwMHB4OwogICAgICAgICAgICBoZWlnaHQ6IDIwMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsICNmZmU0YjUsICNkZWI4ODcpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDQwcHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgICAgIH0KCiAgICAgICAgLyogRXllcyBjb250YWluZXIgKi8KICAgICAgICAuZXllcyB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiA3MHB4OwogICAgICAgICAgICBsZWZ0OiAzMHB4OwogICAgICAgICAgICByaWdodDogMzBweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIH0KCiAgICAgICAgLmV5ZSB7CiAgICAgICAgICAgIHdpZHRoOiA0NXB4OwogICAgICAgICAgICBoZWlnaHQ6IDQ1cHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CgogICAgICAgIC5wdXBpbCB7CiAgICAgICAgICAgIHdpZHRoOiAyMHB4OwogICAgICAgICAgICBoZWlnaHQ6IDIwcHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyYzE4MTA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB0b3A6IDUwJTsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZS1vdXQ7CiAgICAgICAgfQoKICAgICAgICAucHVwaWw6OmFmdGVyIHsKICAgICAgICAgICAgY29udGVudDogJyc7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgd2lkdGg6IDZweDsKICAgICAgICAgICAgaGVpZ2h0OiA2cHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIHRvcDogNHB4OwogICAgICAgICAgICBsZWZ0OiA0cHg7CiAgICAgICAgfQoKICAgICAgICAvKiBMb29raW5nIGRpcmVjdGlvbnMgKi8KICAgICAgICAuZXllcy5sb29rLWxlZnQgLnB1cGlsIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTEwMCUsIC01MCUpOyB9CiAgICAgICAgLmV5ZXMubG9vay1yaWdodCAucHVwaWwgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwJSwgLTUwJSk7IH0KICAgICAgICAuZXllcy5sb29rLXVwIC5wdXBpbCB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC0xMDAlKTsgfQogICAgICAgIC5leWVzLmxvb2stZG93biAucHVwaWwgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwJSk7IH0KICAgICAgICAuZXllcy5sb29rLWNlbnRlciAucHVwaWwgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsgfQoKICAgICAgICAvKiBTbWlsZSAqLwogICAgICAgIC5zbWlsZSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgYm90dG9tOiA1MHB4OwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgd2lkdGg6IDYwcHg7CiAgICAgICAgICAgIGhlaWdodDogMjVweDsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBib3JkZXItYm90dG9tOiA0cHggc29saWQgIzhiNDUxMzsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDYwcHggNjBweDsKICAgICAgICB9CgogICAgICAgIC8qIExpZ2h0IG9yYnMgYXQgY29ybmVycyAqLwogICAgICAgIC5saWdodC1zcG90IHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB3aWR0aDogMTAwcHg7CiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZS1vdXQ7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAubGlnaHQtc3BvdC52aXNpYmxlIHsKICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKICAgICAgICB9CgogICAgICAgIC5saWdodC1zcG90LnB1bHNlIHsKICAgICAgICAgICAgYW5pbWF0aW9uOiBsaWdodFB1bHNlIDFzIGVhc2UtaW4tb3V0IGluZmluaXRlOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBsaWdodFB1bHNlIHsKICAgICAgICAgICAgMCUsIDEwMCUgeyAKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNDBweCB2YXIoLS1nbG93LWNvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgICA1MCUgeyAKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsKICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCA3MHB4IHZhcigtLWdsb3ctY29sb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAubGlnaHQtc3BvdC5sZWZ0IHsKICAgICAgICAgICAgbGVmdDogNTBweDsKICAgICAgICAgICAgdG9wOiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSBzY2FsZSgwKTsKICAgICAgICB9CiAgICAgICAgLmxpZ2h0LXNwb3QubGVmdC52aXNpYmxlIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHNjYWxlKDEpOwogICAgICAgIH0KCiAgICAgICAgLmxpZ2h0LXNwb3QucmlnaHQgewogICAgICAgICAgICByaWdodDogNTBweDsKICAgICAgICAgICAgdG9wOiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSBzY2FsZSgwKTsKICAgICAgICB9CiAgICAgICAgLmxpZ2h0LXNwb3QucmlnaHQudmlzaWJsZSB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSBzY2FsZSgxKTsKICAgICAgICB9CgogICAgICAgIC5saWdodC1zcG90LnRvcCB7CiAgICAgICAgICAgIHRvcDogNTBweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgc2NhbGUoMCk7CiAgICAgICAgfQogICAgICAgIC5saWdodC1zcG90LnRvcC52aXNpYmxlIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHNjYWxlKDEpOwogICAgICAgIH0KCiAgICAgICAgLmxpZ2h0LXNwb3QuYm90dG9tIHsKICAgICAgICAgICAgYm90dG9tOiA4MHB4OwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKSBzY2FsZSgwKTsKICAgICAgICB9CiAgICAgICAgLmxpZ2h0LXNwb3QuYm90dG9tLnZpc2libGUgewogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgc2NhbGUoMSk7CiAgICAgICAgfQoKICAgICAgICAubGlnaHQtc3BvdCAuaWNvbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogNTBweDsKICAgICAgICB9CgogICAgICAgIC8qIFN1Y2Nlc3MgY2VsZWJyYXRpb24gKi8KICAgICAgICAucGFydGljbGUgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgIGFuaW1hdGlvbjogcGFydGljbGVCdXJzdCAxcyBlYXNlLW91dCBmb3J3YXJkczsKICAgICAgICB9CgogICAgICAgIEBrZXlmcmFtZXMgcGFydGljbGVCdXJzdCB7CiAgICAgICAgICAgIDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpOwogICAgICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICAxMDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKHZhcigtLXR4KSwgdmFyKC0tdHkpKSBzY2FsZSgwKTsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qIEluc3RydWN0aW9ucyAqLwogICAgICAgIC5pbnN0cnVjdGlvbiB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiA0MHB4OwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzOwogICAgICAgIH0KCiAgICAgICAgLmluc3RydWN0aW9uLmhpZ2hsaWdodCB7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjIwLCAxMDAsIDAuOSk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZweDsKICAgICAgICB9CgogICAgICAgIC5pbnN0cnVjdGlvbi5zdWNjZXNzIHsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMTAwLCAyNTUsIDE1MCwgMC45KTsKICAgICAgICB9CgogICAgICAgIC8qIFNjb3JlICovCiAgICAgICAgLnNjb3JlLWRpc3BsYXkgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMzBweDsKICAgICAgICAgICAgcmlnaHQ6IDQwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpOwogICAgICAgIH0KCiAgICAgICAgLnNjb3JlLWRpc3BsYXkgLnNjb3JlIHsKICAgICAgICAgICAgZm9udC1zaXplOiA0OHB4OwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpOwogICAgICAgIH0KCiAgICAgICAgLyogTGV2ZWwgaW5kaWNhdG9yICovCiAgICAgICAgLmxldmVsLWRpc3BsYXkgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMzBweDsKICAgICAgICAgICAgbGVmdDogNDBweDsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIH0KCiAgICAgICAgLmxldmVsLWRpc3BsYXkgLmxldmVsIHsKICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgIH0KCiAgICAgICAgLyogQ29udHJvbHMgKi8KICAgICAgICAuY29udHJvbHMgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIGJvdHRvbTogMzBweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogMTVweDsKICAgICAgICB9CgogICAgICAgIC5jb250cm9sLWJ0biB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDI1cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICB9CgogICAgICAgIC5jb250cm9sLWJ0bjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KCiAgICAgICAgLyogU3RhcnQgb3ZlcmxheSAqLwogICAgICAgIC5zdGFydC1vdmVybGF5IHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC45NSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXM7CiAgICAgICAgfQoKICAgICAgICAuc3RhcnQtb3ZlcmxheS5oaWRkZW4gewogICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICB9CgogICAgICAgIC5zdGFydC1idG4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNGE1YTZhLCAjM2E0YTVhKTsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzZhN2E4YTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBwYWRkaW5nOiAzMHB4IDYwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICB9CgogICAgICAgIC5zdGFydC1idG46aG92ZXIgewogICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOwogICAgICAgIH0KCiAgICAgICAgLnN0YXJ0LWluZm8gewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgbWF4LXdpZHRoOiA0NTBweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuODsKICAgICAgICB9CgogICAgICAgIC5zdGFydC1pbmZvIHN0cm9uZyB7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjIwLCAxMDAsIDAuOSk7CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9InN0YXJ0LW92ZXJsYXkiIGlkPSJzdGFydE92ZXJsYXkiPgogICAgICAgIDxidXR0b24gY2xhc3M9InN0YXJ0LWJ0biIgaWQ9InN0YXJ0QnRuIj7ilrYgUm96cG9jem5pajwvYnV0dG9uPgogICAgICAgIDxkaXYgY2xhc3M9InN0YXJ0LWluZm8iPgogICAgICAgICAgICBCdcW6a2EgYsSZZHppZSA8c3Ryb25nPnBhdHJ6ZcSHIHcga2llcnVua3U8L3N0cm9uZz4gZ2R6aWUgcG9qYXdpIHNpxJkgxZt3aWF0ZcWCa28uPGJyPjxicj4KICAgICAgICAgICAgUG9tw7PFvCBkemllY2t1IHphdXdhxbx5xIc6ICJQYXRyeiwgZ2R6aWUgcGF0cnp5IGJ1xbprYSEiPGJyPgogICAgICAgICAgICBHZHkgZHppZWNrbyBrbGlrbmllIMWbd2lhdGXFgmtvIOKAlCBuYWdyb2RhITxicj48YnI+CiAgICAgICAgICAgIFRvIHVjenkgPHN0cm9uZz53c3DDs2xuZWogdXdhZ2k8L3N0cm9uZz4g4oCUIHBvZMSFxbxhbmlhIHphIHNwb2pyemVuaWVtLgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnN0cnVjdGlvbiIgaWQ9Imluc3RydWN0aW9uIj5QYXRyeiwgZ2R6aWUgcGF0cnrEmSE8L2Rpdj4KCiAgICAgICAgPCEtLSBMaWdodCBzcG90cyBhdCBlZGdlcyAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJsaWdodC1zcG90IGxlZnQiIGlkPSJzcG90TGVmdCI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj7irZA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGlnaHQtc3BvdCByaWdodCIgaWQ9InNwb3RSaWdodCI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj7irZA8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGlnaHQtc3BvdCB0b3AiIGlkPSJzcG90VG9wIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPuKtkDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJsaWdodC1zcG90IGJvdHRvbSIgaWQ9InNwb3RCb3R0b20iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiI+4q2QPC9zcGFuPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIENlbnRyYWwgZmFjZSAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJmYWNlLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZhY2UiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXllcyBsb29rLWNlbnRlciIgaWQ9ImV5ZXMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV5ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InB1cGlsIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJleWUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwdXBpbCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNtaWxlIj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImxldmVsLWRpc3BsYXkiPgogICAgICAgICAgICBQb3ppb208YnI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsZXZlbCIgaWQ9ImxldmVsIj4xPC9zcGFuPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJzY29yZS1kaXNwbGF5Ij4KICAgICAgICAgICAgUHVua3R5PGJyPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2NvcmUiIGlkPSJzY29yZSI+MDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJjb250cm9sLWJ0biIgaWQ9ImF1dG9CdG4iPuKWtiBBdXRvPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY29udHJvbC1idG4iIGlkPSJyZXNldEJ0biI+T2Qgbm93YTwvYnV0dG9uPgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBjb25zdCBBdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7CiAgICAgICAgbGV0IGF1ZGlvQ3R4ID0gbnVsbDsKCiAgICAgICAgZnVuY3Rpb24gaW5pdEF1ZGlvKCkgewogICAgICAgICAgICBpZiAoIWF1ZGlvQ3R4KSB7CiAgICAgICAgICAgICAgICBhdWRpb0N0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXVkaW9DdHguc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7CiAgICAgICAgICAgICAgICBhdWRpb0N0eC5yZXN1bWUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRWxlbWVudHMKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7CiAgICAgICAgY29uc3QgZXllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleWVzJyk7CiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb24nKTsKICAgICAgICBjb25zdCBzY29yZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7CiAgICAgICAgY29uc3QgbGV2ZWxFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZXZlbCcpOwogICAgICAgIGNvbnN0IHN0YXJ0T3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydE92ZXJsYXknKTsKICAgICAgICBjb25zdCBzdGFydEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ0bicpOwogICAgICAgIGNvbnN0IGF1dG9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b0J0bicpOwogICAgICAgIGNvbnN0IHJlc2V0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0QnRuJyk7CgogICAgICAgIGNvbnN0IHNwb3RzID0gewogICAgICAgICAgICBsZWZ0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BvdExlZnQnKSwKICAgICAgICAgICAgcmlnaHQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcG90UmlnaHQnKSwKICAgICAgICAgICAgdG9wOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BvdFRvcCcpLAogICAgICAgICAgICBib3R0b206IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcG90Qm90dG9tJykKICAgICAgICB9OwoKICAgICAgICBjb25zdCBjb2xvcnMgPSBbJyNmZjZiNmInLCAnIzRlY2RjNCcsICcjZmZlNjZkJywgJyM5NWUxZDMnLCAnI2RkYTBkZCcsICcjODdjZWViJ107CgogICAgICAgIC8vIFN0YXRlCiAgICAgICAgbGV0IHNjb3JlID0gMDsKICAgICAgICBsZXQgbGV2ZWwgPSAxOwogICAgICAgIGxldCBjdXJyZW50RGlyZWN0aW9uID0gbnVsbDsKICAgICAgICBsZXQgaXNXYWl0aW5nID0gZmFsc2U7CiAgICAgICAgbGV0IGF1dG9JbnRlcnZhbCA9IG51bGw7CiAgICAgICAgbGV0IGxvb2tEZWxheSA9IDE1MDA7IC8vIFRpbWUgYmVmb3JlIGxpZ2h0IGFwcGVhcnMgYWZ0ZXIgbG9va2luZwoKICAgICAgICAvLyBEaXJlY3Rpb25zIG1hcHBpbmcKICAgICAgICBjb25zdCBkaXJlY3Rpb25zID0gWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nXTsKCiAgICAgICAgZnVuY3Rpb24gbG9va0F0KGRpcmVjdGlvbikgewogICAgICAgICAgICBleWVzLmNsYXNzTmFtZSA9ICdleWVzJzsKICAgICAgICAgICAgaWYgKGRpcmVjdGlvbikgewogICAgICAgICAgICAgICAgZXllcy5jbGFzc0xpc3QuYWRkKCdsb29rLScgKyBkaXJlY3Rpb24pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZXllcy5jbGFzc0xpc3QuYWRkKCdsb29rLWNlbnRlcicpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzaG93TGlnaHQoZGlyZWN0aW9uKSB7CiAgICAgICAgICAgIC8vIFNldCByYW5kb20gY29sb3IKICAgICAgICAgICAgY29uc3QgY29sb3IgPSBjb2xvcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29sb3JzLmxlbmd0aCldOwogICAgICAgICAgICBjb25zdCBzcG90ID0gc3BvdHNbZGlyZWN0aW9uXTsKICAgICAgICAgICAgc3BvdC5zdHlsZS5iYWNrZ3JvdW5kID0gYHJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgMzAlIDMwJSwgJHtjb2xvcn0sICR7Y29sb3J9ODgpYDsKICAgICAgICAgICAgc3BvdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1nbG93LWNvbG9yJywgY29sb3IpOwogICAgICAgICAgICBzcG90LnN0eWxlLmJveFNoYWRvdyA9IGAwIDAgNDBweCAke2NvbG9yfWA7CiAgICAgICAgICAgIAogICAgICAgICAgICBzcG90LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnLCAncHVsc2UnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGhpZGVBbGxMaWdodHMoKSB7CiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoc3BvdHMpLmZvckVhY2goc3BvdCA9PiB7CiAgICAgICAgICAgICAgICBzcG90LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnLCAncHVsc2UnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwbGF5TG9va1NvdW5kKCkgewogICAgICAgICAgICBpbml0QXVkaW8oKTsKICAgICAgICAgICAgLy8gU29mdCAiYXR0ZW50aW9uIiBzb3VuZAogICAgICAgICAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgIGNvbnN0IGdhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgIG9zYy50eXBlID0gJ3NpbmUnOwogICAgICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDYwMCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICBvc2MuZnJlcXVlbmN5LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDgwMCwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjEpOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xNSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAxLCBhdWRpb0N0eC5jdXJyZW50VGltZSArIDAuMyk7CiAgICAgICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICBvc2Muc3RhcnQoKTsKICAgICAgICAgICAgb3NjLnN0b3AoYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjMpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcGxheVN1Y2Nlc3NTb3VuZCgpIHsKICAgICAgICAgICAgaW5pdEF1ZGlvKCk7CiAgICAgICAgICAgIGNvbnN0IG5vdGVzID0gWzUyMy4yNSwgNjU5LjI1LCA3ODMuOTldOwogICAgICAgICAgICBub3Rlcy5mb3JFYWNoKChmcmVxLCBpKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FpbiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgICAgICAgICBvc2MudHlwZSA9ICdzaW5lJzsKICAgICAgICAgICAgICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKGZyZXEsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4yNSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDEsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMC41KTsKICAgICAgICAgICAgICAgICAgICBvc2MuY29ubmVjdChnYWluKTsKICAgICAgICAgICAgICAgICAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAgICAgICAgIG9zYy5zdGFydCgpOwogICAgICAgICAgICAgICAgICAgIG9zYy5zdG9wKGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMC41KTsKICAgICAgICAgICAgICAgIH0sIGkgKiAxMDApOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhcnRpY2xlcyh4LCB5LCBjb2xvcikgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRpY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5jbGFzc05hbWUgPSAncGFydGljbGUnOwogICAgICAgICAgICAgICAgcGFydGljbGUuc3R5bGUud2lkdGggPSAoOCArIE1hdGgucmFuZG9tKCkgKiAxMCkgKyAncHgnOwogICAgICAgICAgICAgICAgcGFydGljbGUuc3R5bGUuaGVpZ2h0ID0gcGFydGljbGUuc3R5bGUud2lkdGg7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3I7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5sZWZ0ID0geCArICdweCc7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS50b3AgPSB5ICsgJ3B4JzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAvIDIwKSAqIE1hdGguUEkgKiAyOwogICAgICAgICAgICAgICAgY29uc3QgdmVsb2NpdHkgPSA4MCArIE1hdGgucmFuZG9tKCkgKiA4MDsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLnNldFByb3BlcnR5KCctLXR4JywgTWF0aC5jb3MoYW5nbGUpICogdmVsb2NpdHkgKyAncHgnKTsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLnNldFByb3BlcnR5KCctLXR5JywgTWF0aC5zaW4oYW5nbGUpICogdmVsb2NpdHkgKyAncHgnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBhcnRpY2xlKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcGFydGljbGUucmVtb3ZlKCksIDEwMDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdGFydFJvdW5kKCkgewogICAgICAgICAgICBpZiAoaXNXYWl0aW5nKSByZXR1cm47CiAgICAgICAgICAgIAogICAgICAgICAgICBoaWRlQWxsTGlnaHRzKCk7CiAgICAgICAgICAgIGxvb2tBdCgnY2VudGVyJyk7CiAgICAgICAgICAgIGluc3RydWN0aW9uLnRleHRDb250ZW50ID0gJ1BhdHJ6IG5hIG1uaWUuLi4nOwogICAgICAgICAgICBpbnN0cnVjdGlvbi5jbGFzc05hbWUgPSAnaW5zdHJ1Y3Rpb24nOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gV2FpdCwgdGhlbiBsb29rIGluIGRpcmVjdGlvbgogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGN1cnJlbnREaXJlY3Rpb24gPSBkaXJlY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRpcmVjdGlvbnMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICBsb29rQXQoY3VycmVudERpcmVjdGlvbik7CiAgICAgICAgICAgICAgICBwbGF5TG9va1NvdW5kKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnRleHRDb250ZW50ID0gJ1BhdHJ6LCBnZHppZSBwYXRyesSZISc7CiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbi5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQWZ0ZXIgZGVsYXksIHNob3cgbGlnaHQKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHNob3dMaWdodChjdXJyZW50RGlyZWN0aW9uKTsKICAgICAgICAgICAgICAgICAgICBpc1dhaXRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnRleHRDb250ZW50ID0gJ0tsaWtuaWogxZt3aWF0ZcWCa28hJzsKICAgICAgICAgICAgICAgIH0sIGxvb2tEZWxheSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVTcG90Q2xpY2soZGlyZWN0aW9uKSB7CiAgICAgICAgICAgIGlmICghaXNXYWl0aW5nKSByZXR1cm47CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBjdXJyZW50RGlyZWN0aW9uKSB7CiAgICAgICAgICAgICAgICAvLyBTdWNjZXNzIQogICAgICAgICAgICAgICAgaXNXYWl0aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzY29yZSsrOwogICAgICAgICAgICAgICAgc2NvcmVFbC50ZXh0Q29udGVudCA9IHNjb3JlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBHZXQgc3BvdCBwb3NpdGlvbiBmb3IgcGFydGljbGVzCiAgICAgICAgICAgICAgICBjb25zdCBzcG90ID0gc3BvdHNbZGlyZWN0aW9uXTsKICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzcG90LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBzcG90LnN0eWxlLmJhY2tncm91bmQuaW5jbHVkZXMoJyMnKSAKICAgICAgICAgICAgICAgICAgICA/IHNwb3Quc3R5bGUuYmFja2dyb3VuZC5tYXRjaCgvI1thLWYwLTldezZ9L2kpWzBdIAogICAgICAgICAgICAgICAgICAgIDogJyNmZmU2NmQnOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjcmVhdGVQYXJ0aWNsZXMocmVjdC5sZWZ0ICsgcmVjdC53aWR0aC8yLCByZWN0LnRvcCArIHJlY3QuaGVpZ2h0LzIsIGNvbG9yKTsKICAgICAgICAgICAgICAgIHBsYXlTdWNjZXNzU291bmQoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaGlkZUFsbExpZ2h0cygpOwogICAgICAgICAgICAgICAgbG9va0F0KCdjZW50ZXInKTsKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnRleHRDb250ZW50ID0gJ0JSQVdPISDwn4yfJzsKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLmNsYXNzTmFtZSA9ICdpbnN0cnVjdGlvbiBzdWNjZXNzJzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTGV2ZWwgdXAgZXZlcnkgNSBwb2ludHMKICAgICAgICAgICAgICAgIGlmIChzY29yZSAlIDUgPT09IDAgJiYgbG9va0RlbGF5ID4gNTAwKSB7CiAgICAgICAgICAgICAgICAgICAgbGV2ZWwrKzsKICAgICAgICAgICAgICAgICAgICBsZXZlbEVsLnRleHRDb250ZW50ID0gbGV2ZWw7CiAgICAgICAgICAgICAgICAgICAgbG9va0RlbGF5ID0gTWF0aC5tYXgoNTAwLCBsb29rRGVsYXkgLSAyMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBOZXh0IHJvdW5kCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHN0YXJ0Um91bmQsIDE1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBFdmVudCBsaXN0ZW5lcnMKICAgICAgICBPYmplY3QuZW50cmllcyhzcG90cykuZm9yRWFjaCgoW2RpcmVjdGlvbiwgc3BvdF0pID0+IHsKICAgICAgICAgICAgc3BvdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGhhbmRsZVNwb3RDbGljayhkaXJlY3Rpb24pKTsKICAgICAgICB9KTsKCiAgICAgICAgc3RhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICAgIGluaXRBdWRpbygpOwogICAgICAgICAgICBzdGFydE92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoc3RhcnRSb3VuZCwgNTAwKTsKICAgICAgICB9KTsKCiAgICAgICAgYXV0b0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgaWYgKGF1dG9JbnRlcnZhbCkgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhdXRvSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgYXV0b0ludGVydmFsID0gbnVsbDsKICAgICAgICAgICAgICAgIGF1dG9CdG4udGV4dENvbnRlbnQgPSAn4pa2IEF1dG8nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXV0b0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghaXNXYWl0aW5nICYmICFzdGFydE92ZXJsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmICghaXNXYWl0aW5nKSBzdGFydFJvdW5kKCk7CiAgICAgICAgICAgICAgICB9LCA0MDAwKTsKICAgICAgICAgICAgICAgIGF1dG9CdG4udGV4dENvbnRlbnQgPSAn4o+4IFN0b3AnOwogICAgICAgICAgICAgICAgaWYgKCFpc1dhaXRpbmcpIHN0YXJ0Um91bmQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICByZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgc2NvcmUgPSAwOwogICAgICAgICAgICBsZXZlbCA9IDE7CiAgICAgICAgICAgIGxvb2tEZWxheSA9IDE1MDA7CiAgICAgICAgICAgIHNjb3JlRWwudGV4dENvbnRlbnQgPSAnMCc7CiAgICAgICAgICAgIGxldmVsRWwudGV4dENvbnRlbnQgPSAnMSc7CiAgICAgICAgICAgIGlzV2FpdGluZyA9IGZhbHNlOwogICAgICAgICAgICBoaWRlQWxsTGlnaHRzKCk7CiAgICAgICAgICAgIGxvb2tBdCgnY2VudGVyJyk7CiAgICAgICAgICAgIGluc3RydWN0aW9uLnRleHRDb250ZW50ID0gJ1BhdHJ6LCBnZHppZSBwYXRyesSZISc7CiAgICAgICAgICAgIGluc3RydWN0aW9uLmNsYXNzTmFtZSA9ICdpbnN0cnVjdGlvbic7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoYXV0b0ludGVydmFsKSB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGF1dG9JbnRlcnZhbCk7CiAgICAgICAgICAgICAgICBhdXRvSW50ZXJ2YWwgPSBudWxsOwogICAgICAgICAgICAgICAgYXV0b0J0bi50ZXh0Q29udGVudCA9ICfilrYgQXV0byc7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gRnVsbHNjcmVlbgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKGUpID0+IHsKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5saWdodC1zcG90JykpIHJldHVybjsKICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==",
            spokoj: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InBsIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+U3RyZWZhIFNwb2tvanUgLSBXZXJzamEgVGVyYXBldXR5Y3puYTwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDUwNTEwOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgc2Fucy1zZXJpZjsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICB3aWR0aDogMTAwdnc7CiAgICAgICAgICAgIGhlaWdodDogMTAwdmg7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAvKiBNYWluIGJyZWF0aGluZyBjaXJjbGUgKi8KICAgICAgICAuYnJlYXRoaW5nLW9yYiB7CiAgICAgICAgICAgIHdpZHRoOiAyMDBweDsKICAgICAgICAgICAgaGVpZ2h0OiAyMDBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDMwJSAzMCUsICMxYTJhNGEsICMwYTE1MjUpOwogICAgICAgICAgICBib3gtc2hhZG93OiAKICAgICAgICAgICAgICAgIDAgMCA2MHB4IHJnYmEoMTAwLCAxNTAsIDIwMCwgMC4yKSwKICAgICAgICAgICAgICAgIGluc2V0IDAgMCA0MHB4IHJnYmEoMTAwLCAxNTAsIDIwMCwgMC4xKTsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICB9CgogICAgICAgIC5icmVhdGhpbmctb3JiLmJyZWF0aGluZyB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogYnJlYXRoZSB2YXIoLS1icmVhdGgtZHVyYXRpb24sIDhzKSBlYXNlLWluLW91dCBpbmZpbml0ZTsKICAgICAgICB9CgogICAgICAgIC5icmVhdGhpbmctb3JiLmhlYXJ0YmVhdCB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogaGVhcnRiZWF0VmlzdWFsIDFzIGVhc2UtaW4tb3V0IGluZmluaXRlOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBicmVhdGhlIHsKICAgICAgICAgICAgMCUsIDEwMCUgeyAKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7CiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAKICAgICAgICAgICAgICAgICAgICAwIDAgNjBweCB2YXIoLS1nbG93LWNvbG9yLCByZ2JhKDEwMCwgMTUwLCAyMDAsIDAuMikpLAogICAgICAgICAgICAgICAgICAgIGluc2V0IDAgMCA0MHB4IHZhcigtLWdsb3ctY29sb3ItaW5uZXIsIHJnYmEoMTAwLCAxNTAsIDIwMCwgMC4xKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgNTAlIHsgCiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMzUpOwogICAgICAgICAgICAgICAgYm94LXNoYWRvdzogCiAgICAgICAgICAgICAgICAgICAgMCAwIDEwMHB4IHZhcigtLWdsb3ctY29sb3IsIHJnYmEoMTAwLCAxNTAsIDIwMCwgMC40KSksCiAgICAgICAgICAgICAgICAgICAgaW5zZXQgMCAwIDYwcHggdmFyKC0tZ2xvdy1jb2xvci1pbm5lciwgcmdiYSgxMDAsIDE1MCwgMjAwLCAwLjIpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBoZWFydGJlYXRWaXN1YWwgewogICAgICAgICAgICAwJSwgMTAwJSB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0KICAgICAgICAgICAgMTUlIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjE1KTsgfQogICAgICAgICAgICAzMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9CiAgICAgICAgICAgIDQ1JSB7IHRyYW5zZm9ybTogc2NhbGUoMS4xKTsgfQogICAgICAgICAgICA2MCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9CiAgICAgICAgfQoKICAgICAgICAvKiBHbG93IHJpbmcgYXJvdW5kIG9yYiAqLwogICAgICAgIC5nbG93LXJpbmcgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogLTQwcHg7CiAgICAgICAgICAgIGxlZnQ6IC00MHB4OwogICAgICAgICAgICByaWdodDogLTQwcHg7CiAgICAgICAgICAgIGJvdHRvbTogLTQwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmFkaWFsLWdyYWRpZW50KGNpcmNsZSwgdmFyKC0tZ2xvdy1jb2xvciwgcmdiYSgxMDAsIDE1MCwgMjAwLCAwLjEpKSAwJSwgdHJhbnNwYXJlbnQgNzAlKTsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAvKiBGbG9hdGluZyBwYXJ0aWNsZXMgKi8KICAgICAgICAucGFydGljbGVzIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgIH0KCiAgICAgICAgLnBhcnRpY2xlIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIG9wYWNpdHk6IDAuNDsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmbG9hdFVwIGxpbmVhciBpbmZpbml0ZTsKICAgICAgICB9CgogICAgICAgIEBrZXlmcmFtZXMgZmxvYXRVcCB7CiAgICAgICAgICAgIDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMDB2aCkgc2NhbGUoMSk7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIDEwJSB7IG9wYWNpdHk6IDAuNDsgfQogICAgICAgICAgICA5MCUgeyBvcGFjaXR5OiAwLjQ7IH0KICAgICAgICAgICAgMTAwJSB7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwcHgpIHNjYWxlKDAuNSk7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiBTb3VuZCBtb2RlIGJ1dHRvbnMgKi8KICAgICAgICAuc291bmQtbW9kZXMgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIGJvdHRvbTogMTAwcHg7CiAgICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBnYXA6IDE1cHg7CiAgICAgICAgICAgIG1heC13aWR0aDogNTAwcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDAgMjBweDsKICAgICAgICB9CgogICAgICAgIC5zb3VuZC1tb2RlIHsKICAgICAgICAgICAgd2lkdGg6IDgwcHg7CiAgICAgICAgICAgIGhlaWdodDogODBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjRzOwogICAgICAgIH0KCiAgICAgICAgLnNvdW5kLW1vZGU6aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7CiAgICAgICAgfQoKICAgICAgICAuc291bmQtbW9kZS5hY3RpdmUgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDEwMCwgMTUwLCAyMDAsIDAuMik7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogcmdiYSgxMDAsIDE1MCwgMjAwLCAwLjUpOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMzBweCByZ2JhKDEwMCwgMTUwLCAyMDAsIDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuc291bmQtbW9kZSAuaWNvbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjhweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4OwogICAgICAgIH0KCiAgICAgICAgLnNvdW5kLW1vZGUgLmxhYmVsIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAvKiBWb2x1bWUgY29udHJvbCAqLwogICAgICAgIC52b2x1bWUtY29udHJvbCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgYm90dG9tOiA0MHB4OwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiAxNXB4OwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpOwogICAgICAgIH0KCiAgICAgICAgLnZvbHVtZS1zbGlkZXIgewogICAgICAgICAgICB3aWR0aDogMTUwcHg7CiAgICAgICAgICAgIGhlaWdodDogNnB4OwogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICB9CgogICAgICAgIC52b2x1bWUtc2xpZGVyOjotd2Via2l0LXNsaWRlci10aHVtYiB7CiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgd2lkdGg6IDE4cHg7CiAgICAgICAgICAgIGhlaWdodDogMThweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDEwMCwgMTUwLCAyMDAsIDAuNyk7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB9CgogICAgICAgIC8qIEluZm8gZGlzcGxheSAqLwogICAgICAgIC5pbmZvLWRpc3BsYXkgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMzBweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KTsKICAgICAgICB9CgogICAgICAgIC5pbmZvLWRpc3BsYXkgLnRpdGxlIHsKICAgICAgICAgICAgZm9udC1zaXplOiAyMHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogMzAwOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgICAgfQoKICAgICAgICAuaW5mby1kaXNwbGF5IC5zdWJ0aXRsZSB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC40KTsKICAgICAgICB9CgogICAgICAgIC8qIFRpbWVyICovCiAgICAgICAgLnRpbWVyIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDMwcHg7CiAgICAgICAgICAgIHJpZ2h0OiAzMHB4OwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpOwogICAgICAgICAgICBmb250LXNpemU6IDI0cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7CiAgICAgICAgfQoKICAgICAgICAvKiBTY2llbnRpZmljIGluZm8gcGFuZWwgKi8KICAgICAgICAuaW5mby1wYW5lbCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAzMHB4OwogICAgICAgICAgICBsZWZ0OiAzMHB4OwogICAgICAgICAgICBtYXgtd2lkdGg6IDI1MHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICB9CgogICAgICAgIC5pbmZvLXBhbmVsLnZpc2libGUgewogICAgICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgIH0KCiAgICAgICAgLmluZm8tcGFuZWwgaDQgewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgfQoKICAgICAgICAvKiBIZWxwIGJ1dHRvbiAqLwogICAgICAgIC5oZWxwLWJ0biB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgYm90dG9tOiA0MHB4OwogICAgICAgICAgICByaWdodDogMzBweDsKICAgICAgICAgICAgd2lkdGg6IDQwcHg7CiAgICAgICAgICAgIGhlaWdodDogNDBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgIH0KCiAgICAgICAgLmhlbHAtYnRuOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGNsYXNzPSJwYXJ0aWNsZXMiIGlkPSJwYXJ0aWNsZXMiPjwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0iYnJlYXRoaW5nLW9yYiBicmVhdGhpbmciIGlkPSJvcmIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJnbG93LXJpbmciPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iaW5mby1kaXNwbGF5Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJ0aXRsZSIgaWQ9ImN1cnJlbnRNb2RlIj5XeWJpZXJ6IGTFundpxJlrPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3VidGl0bGUiIGlkPSJtb2RlSW5mbyI+PC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJ0aW1lciIgaWQ9InRpbWVyIj4wOjAwPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iaW5mby1wYW5lbCIgaWQ9ImluZm9QYW5lbCI+CiAgICAgICAgPGg0IGlkPSJpbmZvUGFuZWxUaXRsZSI+SW5mb3JtYWNqYTwvaDQ+CiAgICAgICAgPHAgaWQ9ImluZm9QYW5lbFRleHQiPjwvcD4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9InNvdW5kLW1vZGVzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzb3VuZC1tb2RlIiBkYXRhLW1vZGU9ImhlYXJ0YmVhdCIgZGF0YS1pbmZvPSJCaWNpZSBzZXJjYSA2MCBCUE0gcmVndWx1amUgdWvFgmFkIG5lcndvd3kuIEJhcmR6byBza3V0ZWN6bmUgZGxhIG1hxYJ5Y2ggZHppZWNpIC0gcHJ6eXBvbWluYSBkxbp3acSZa2kgeiDFgm9uYSBtYXRraS4iPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbiI+8J+Skzwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImxhYmVsIj5TZXJjZTwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzb3VuZC1tb2RlIiBkYXRhLW1vZGU9IjUyOGh6IiBkYXRhLWluZm89IjUyOCBIeiAtIGJhZGFuaWEgd3lrYXp1asSFIG9ibmnFvGVuaWUga29ydHl6b2x1IChob3Jtb251IHN0cmVzdSkgaSB3enJvc3Qgb2tzeXRvY3lueSBwbyBzxYJ1Y2hhbml1IHRlaiBjesSZc3RvdGxpd2/Fm2NpLiI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpY29uIj7wn461PC9zcGFuPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0ibGFiZWwiPjUyOCBIejwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzb3VuZC1tb2RlIiBkYXRhLW1vZGU9IjQzMmh6IiBkYXRhLWluZm89IjQzMiBIeiAtIHV3YcW8YW5hIHphIGJhcmR6aWVqIG5hdHVyYWxuxIUgaSBoYXJtb25pam7EhSBjesSZc3RvdGxpd2/Fm8SHLiBXaWVsdSByb2R6aWPDs3cgZHppZWNpIHogYXV0eXptZW0gcmFwb3J0dWplIGVmZWt0IHVzcG9rYWphasSFY3kuIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPvCfjrY8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+NDMyIEh6PC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InNvdW5kLW1vZGUiIGRhdGEtbW9kZT0icGluayIgZGF0YS1pbmZvPSJSw7PFvG93eSBzenVtIC0gY2llcGxlanN6eSBuacW8IGJpYcWCeSBzenVtLCBsZXBpZWogdG9sZXJvd2FueSBwcnpleiBkemllY2kgeiB3cmHFvGxpd2/Fm2NpxIUgc2Vuc29yeWN6bsSFLiBNYXNrdWplIHJvenByYXN6YWrEhWNlIGTFundpxJlraSBvdG9jemVuaWEuIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPvCfjLg8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+UsOzxbxvd3kgc3p1bTwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzb3VuZC1tb2RlIiBkYXRhLW1vZGU9Imx1bGxhYnkiIGRhdGEtaW5mbz0iRmlsdHJvd2FuYSBtdXp5a2EgdyB6YWtyZXNpZSBnxYJvc3Uga29iaWVjZWdvIChrb8WCeXNhbmthKS4gQmFkYW5pYSBQb3JnZXNhIHd5a2F6YcWCeSBwb3ByYXfEmSBrb211bmlrYWNqaSBwbyA1IGRuaWFjaCBzxYJ1Y2hhbmlhIDQ1IG1pbi9kemllxYQuIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPvCfjJk8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+S2/FgnlzYW5rYTwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzb3VuZC1tb2RlIiBkYXRhLW1vZGU9Im9jZWFuIiBkYXRhLWluZm89IkTFundpxJlraSBvY2VhbnUgLSByeXRtaWN6bmUgZmFsZSBtYWrEhSBuYXR1cmFsbnkgZWZla3QgdXNwb2thamFqxIVjeS4gTmlza2llIGN6xJlzdG90bGl3b8WbY2kgd3NwaWVyYWrEhSBpbnRlZ3JhY2rEmSBzZW5zb3J5Y3puxIUuIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9Imljb24iPvCfjIo8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+T2NlYW48L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJ2b2x1bWUtY29udHJvbCI+CiAgICAgICAgPHNwYW4+8J+UiDwvc3Bhbj4KICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIGNsYXNzPSJ2b2x1bWUtc2xpZGVyIiBpZD0idm9sdW1lIiBtaW49IjAiIG1heD0iMTAwIiB2YWx1ZT0iNDAiPgogICAgICAgIDxzcGFuPvCflIo8L3NwYW4+CiAgICA8L2Rpdj4KCiAgICA8YnV0dG9uIGNsYXNzPSJoZWxwLWJ0biIgaWQ9ImhlbHBCdG4iPj88L2J1dHRvbj4KCiAgICA8c2NyaXB0PgogICAgICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICBsZXQgYXVkaW9DdHggPSBudWxsOwogICAgICAgIGxldCBjdXJyZW50Tm9kZXMgPSBbXTsKICAgICAgICBsZXQgY3VycmVudE1vZGUgPSBudWxsOwogICAgICAgIGxldCB2b2x1bWUgPSAwLjQ7CiAgICAgICAgbGV0IHNlc3Npb25TdGFydCA9IG51bGw7CiAgICAgICAgbGV0IHRpbWVySW50ZXJ2YWwgPSBudWxsOwoKICAgICAgICBjb25zdCBvcmIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3JiJyk7CiAgICAgICAgY29uc3QgY3VycmVudE1vZGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50TW9kZScpOwogICAgICAgIGNvbnN0IG1vZGVJbmZvRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZUluZm8nKTsKICAgICAgICBjb25zdCB0aW1lckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVyJyk7CiAgICAgICAgY29uc3QgaW5mb1BhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9QYW5lbCcpOwogICAgICAgIGNvbnN0IGluZm9QYW5lbFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm9QYW5lbFRpdGxlJyk7CiAgICAgICAgY29uc3QgaW5mb1BhbmVsVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvUGFuZWxUZXh0Jyk7CiAgICAgICAgY29uc3Qgdm9sdW1lU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZvbHVtZScpOwogICAgICAgIGNvbnN0IGhlbHBCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVscEJ0bicpOwoKICAgICAgICAvLyBDb2xvciB0aGVtZXMgZm9yIGRpZmZlcmVudCBtb2RlcwogICAgICAgIGNvbnN0IG1vZGVDb2xvcnMgPSB7CiAgICAgICAgICAgIGhlYXJ0YmVhdDogeyBnbG93OiAncmdiYSgyNTUsIDEwMCwgMTIwLCAwLjMpJywgaW5uZXI6ICdyZ2JhKDI1NSwgMTAwLCAxMjAsIDAuMTUpJyB9LAogICAgICAgICAgICAnNTI4aHonOiB7IGdsb3c6ICdyZ2JhKDEwMCwgMjAwLCAxNTAsIDAuMyknLCBpbm5lcjogJ3JnYmEoMTAwLCAyMDAsIDE1MCwgMC4xNSknIH0sCiAgICAgICAgICAgICc0MzJoeic6IHsgZ2xvdzogJ3JnYmEoMjAwLCAxNTAsIDEwMCwgMC4zKScsIGlubmVyOiAncmdiYSgyMDAsIDE1MCwgMTAwLCAwLjE1KScgfSwKICAgICAgICAgICAgcGluazogeyBnbG93OiAncmdiYSgyNTUsIDE1MCwgMjAwLCAwLjMpJywgaW5uZXI6ICdyZ2JhKDI1NSwgMTUwLCAyMDAsIDAuMTUpJyB9LAogICAgICAgICAgICBsdWxsYWJ5OiB7IGdsb3c6ICdyZ2JhKDE1MCwgMTUwLCAyNTUsIDAuMyknLCBpbm5lcjogJ3JnYmEoMTUwLCAxNTAsIDI1NSwgMC4xNSknIH0sCiAgICAgICAgICAgIG9jZWFuOiB7IGdsb3c6ICdyZ2JhKDEwMCwgMTgwLCAyMjAsIDAuMyknLCBpbm5lcjogJ3JnYmEoMTAwLCAxODAsIDIyMCwgMC4xNSknIH0KICAgICAgICB9OwoKICAgICAgICBjb25zdCBtb2RlTmFtZXMgPSB7CiAgICAgICAgICAgIGhlYXJ0YmVhdDogJ0JpY2llIFNlcmNhJywKICAgICAgICAgICAgJzUyOGh6JzogJzUyOCBIeiAtIEN6xJlzdG90bGl3b8WbxIcgVXpkcmF3aWFqxIVjYScsCiAgICAgICAgICAgICc0MzJoeic6ICc0MzIgSHogLSBOYXR1cmFsbmEgSGFybW9uaWEnLAogICAgICAgICAgICBwaW5rOiAnUsOzxbxvd3kgU3p1bScsCiAgICAgICAgICAgIGx1bGxhYnk6ICdLb8WCeXNhbmthJywKICAgICAgICAgICAgb2NlYW46ICdGYWxlIE9jZWFudScKICAgICAgICB9OwoKICAgICAgICBmdW5jdGlvbiBpbml0QXVkaW8oKSB7CiAgICAgICAgICAgIGlmICghYXVkaW9DdHgpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhdWRpb0N0eC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4LnJlc3VtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdG9wQWxsU291bmRzKCkgewogICAgICAgICAgICBjdXJyZW50Tm9kZXMuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuc3RvcCkgbm9kZS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuZGlzY29ubmVjdCkgbm9kZS5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY3VycmVudE5vZGVzID0gW107CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAodGltZXJJbnRlcnZhbCkgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lckludGVydmFsKTsKICAgICAgICAgICAgICAgIHRpbWVySW50ZXJ2YWwgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdGFydFRpbWVyKCkgewogICAgICAgICAgICBzZXNzaW9uU3RhcnQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICB0aW1lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZWxhcHNlZCA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSBzZXNzaW9uU3RhcnQpIC8gMTAwMCk7CiAgICAgICAgICAgICAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihlbGFwc2VkIC8gNjApOwogICAgICAgICAgICAgICAgY29uc3Qgc2VjcyA9IGVsYXBzZWQgJSA2MDsKICAgICAgICAgICAgICAgIHRpbWVyRWwudGV4dENvbnRlbnQgPSBgJHttaW5zfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2V0T3JiU3R5bGUobW9kZSkgewogICAgICAgICAgICBjb25zdCBjb2xvcnMgPSBtb2RlQ29sb3JzW21vZGVdOwogICAgICAgICAgICBvcmIuc3R5bGUuc2V0UHJvcGVydHkoJy0tZ2xvdy1jb2xvcicsIGNvbG9ycy5nbG93KTsKICAgICAgICAgICAgb3JiLnN0eWxlLnNldFByb3BlcnR5KCctLWdsb3ctY29sb3ItaW5uZXInLCBjb2xvcnMuaW5uZXIpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU3BlY2lhbCBhbmltYXRpb24gZm9yIGhlYXJ0YmVhdAogICAgICAgICAgICBvcmIuY2xhc3NMaXN0LnJlbW92ZSgnYnJlYXRoaW5nJywgJ2hlYXJ0YmVhdCcpOwogICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2hlYXJ0YmVhdCcpIHsKICAgICAgICAgICAgICAgIG9yYi5jbGFzc0xpc3QuYWRkKCdoZWFydGJlYXQnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9yYi5jbGFzc0xpc3QuYWRkKCdicmVhdGhpbmcnKTsKICAgICAgICAgICAgICAgIC8vIFNsb3dlciBicmVhdGhpbmcgZm9yIG1vcmUgY2FsbWluZyBtb2RlcwogICAgICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBtb2RlID09PSAnbHVsbGFieScgPyAnMTBzJyA6ICc4cyc7CiAgICAgICAgICAgICAgICBvcmIuc3R5bGUuc2V0UHJvcGVydHkoJy0tYnJlYXRoLWR1cmF0aW9uJywgZHVyYXRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBTb3VuZCBnZW5lcmF0b3JzCiAgICAgICAgY29uc3Qgc291bmRHZW5lcmF0b3JzID0gewogICAgICAgICAgICBoZWFydGJlYXQ6ICgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBpc1BsYXlpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwbGF5QmVhdCgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUGxheWluZyB8fCBjdXJyZW50TW9kZSAhPT0gJ2hlYXJ0YmVhdCcpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBMdWIKICAgICAgICAgICAgICAgICAgICBjb25zdCBvc2MxID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhaW4xID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgICAgICAgICAgICAgICAgIG9zYzEudHlwZSA9ICdzaW5lJzsKICAgICAgICAgICAgICAgICAgICBvc2MxLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSg2MCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgICAgIGdhaW4xLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgICAgIGdhaW4xLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodm9sdW1lICogMC40LCBhdWRpb0N0eC5jdXJyZW50VGltZSArIDAuMDIpOwogICAgICAgICAgICAgICAgICAgIGdhaW4xLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjI1KTsKICAgICAgICAgICAgICAgICAgICBvc2MxLmNvbm5lY3QoZ2FpbjEpOwogICAgICAgICAgICAgICAgICAgIGdhaW4xLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAgICAgICAgIG9zYzEuc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICBvc2MxLnN0b3AoYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjI1KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBEdWIgKGFmdGVyIDE1MG1zKQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUGxheWluZyB8fCBjdXJyZW50TW9kZSAhPT0gJ2hlYXJ0YmVhdCcpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3NjMiA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FpbjIgPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9zYzIudHlwZSA9ICdzaW5lJzsKICAgICAgICAgICAgICAgICAgICAgICAgb3NjMi5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNTAsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FpbjIuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhaW4yLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodm9sdW1lICogMC4zLCBhdWRpb0N0eC5jdXJyZW50VGltZSArIDAuMDIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYWluMi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3NjMi5jb25uZWN0KGdhaW4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FpbjIuY29ubmVjdChhdWRpb0N0eC5kZXN0aW5hdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIG9zYzIuc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3NjMi5zdG9wKGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMC4yKTsKICAgICAgICAgICAgICAgICAgICB9LCAxNTApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIE5leHQgYmVhdCBhZnRlciAxIHNlY29uZCAoNjAgQlBNKQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocGxheUJlYXQsIDEwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBwbGF5QmVhdCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gY2xlYW51cCBmdW5jdGlvbgogICAgICAgICAgICAgICAgY3VycmVudE5vZGVzLnB1c2goeyBzdG9wOiAoKSA9PiB7IGlzUGxheWluZyA9IGZhbHNlOyB9IH0pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgJzUyOGh6JzogKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb3NjID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICAgICAgY29uc3QgZ2FpbiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgb3NjLnR5cGUgPSAnc2luZSc7CiAgICAgICAgICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDUyOCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSAqIDAuMTUsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQWRkIHN1YnRsZSBoYXJtb25pY3MgZm9yIHdhcm10aAogICAgICAgICAgICAgICAgY29uc3Qgb3NjMiA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGdhaW4yID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgICAgICAgICAgICAgb3NjMi50eXBlID0gJ3NpbmUnOwogICAgICAgICAgICAgICAgb3NjMi5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNTI4ICogMiwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgZ2FpbjIuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUgKiAwLjAzLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFNsb3cgYW1wbGl0dWRlIG1vZHVsYXRpb24KICAgICAgICAgICAgICAgIGNvbnN0IGxmbyA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGxmb0dhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgICAgICBsZm8uZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDAuMSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgbGZvR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSAqIDAuMDIsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgIGxmby5jb25uZWN0KGxmb0dhaW4pOwogICAgICAgICAgICAgICAgbGZvR2Fpbi5jb25uZWN0KGdhaW4uZ2Fpbik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICAgICAgb3NjMi5jb25uZWN0KGdhaW4yKTsKICAgICAgICAgICAgICAgIGdhaW4yLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgICAgICAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBvc2Muc3RhcnQoKTsKICAgICAgICAgICAgICAgIG9zYzIuc3RhcnQoKTsKICAgICAgICAgICAgICAgIGxmby5zdGFydCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZXMucHVzaChvc2MsIG9zYzIsIGxmbywgZ2Fpbik7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAnNDMyaHonOiAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgICAgICBjb25zdCBnYWluID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBvc2MudHlwZSA9ICdzaW5lJzsKICAgICAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNDMyLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lICogMC4xNSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBZGQgc3ViIGhhcm1vbmljIGZvciBkZXB0aAogICAgICAgICAgICAgICAgY29uc3Qgb3NjU3ViID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICAgICAgY29uc3QgZ2FpblN1YiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgICAgIG9zY1N1Yi50eXBlID0gJ3NpbmUnOwogICAgICAgICAgICAgICAgb3NjU3ViLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgyMTYsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsgLy8gT2N0YXZlIGJlbG93CiAgICAgICAgICAgICAgICBnYWluU3ViLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lICogMC4wNSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBHZW50bGUgbW9kdWxhdGlvbgogICAgICAgICAgICAgICAgY29uc3QgbGZvID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICAgICAgY29uc3QgbGZvR2FpbiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgICAgIGxmby5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoMC4wOCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgbGZvR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSAqIDAuMDE1LCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICBsZm8uY29ubmVjdChsZm9HYWluKTsKICAgICAgICAgICAgICAgIGxmb0dhaW4uY29ubmVjdChnYWluLmdhaW4pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBvc2MuY29ubmVjdChnYWluKTsKICAgICAgICAgICAgICAgIG9zY1N1Yi5jb25uZWN0KGdhaW5TdWIpOwogICAgICAgICAgICAgICAgZ2FpblN1Yi5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICAgICAgZ2Fpbi5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgb3NjLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICBvc2NTdWIuc3RhcnQoKTsKICAgICAgICAgICAgICAgIGxmby5zdGFydCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZXMucHVzaChvc2MsIG9zY1N1YiwgbGZvLCBnYWluKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHBpbms6ICgpID0+IHsKICAgICAgICAgICAgICAgIC8vIFBpbmsgbm9pc2UgZ2VuZXJhdG9yCiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJTaXplID0gMiAqIGF1ZGlvQ3R4LnNhbXBsZVJhdGU7CiAgICAgICAgICAgICAgICBjb25zdCBub2lzZUJ1ZmZlciA9IGF1ZGlvQ3R4LmNyZWF0ZUJ1ZmZlcigxLCBidWZmZXJTaXplLCBhdWRpb0N0eC5zYW1wbGVSYXRlKTsKICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5vaXNlQnVmZmVyLmdldENoYW5uZWxEYXRhKDApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgYjAgPSAwLCBiMSA9IDAsIGIyID0gMCwgYjMgPSAwLCBiNCA9IDAsIGI1ID0gMCwgYjYgPSAwOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlclNpemU7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHdoaXRlID0gTWF0aC5yYW5kb20oKSAqIDIgLSAxOwogICAgICAgICAgICAgICAgICAgIGIwID0gMC45OTg4NiAqIGIwICsgd2hpdGUgKiAwLjA1NTUxNzk7CiAgICAgICAgICAgICAgICAgICAgYjEgPSAwLjk5MzMyICogYjEgKyB3aGl0ZSAqIDAuMDc1MDc1OTsKICAgICAgICAgICAgICAgICAgICBiMiA9IDAuOTY5MDAgKiBiMiArIHdoaXRlICogMC4xNTM4NTIwOwogICAgICAgICAgICAgICAgICAgIGIzID0gMC44NjY1MCAqIGIzICsgd2hpdGUgKiAwLjMxMDQ4NTY7CiAgICAgICAgICAgICAgICAgICAgYjQgPSAwLjU1MDAwICogYjQgKyB3aGl0ZSAqIDAuNTMyOTUyMjsKICAgICAgICAgICAgICAgICAgICBiNSA9IC0wLjc2MTYgKiBiNSAtIHdoaXRlICogMC4wMTY4OTgwOwogICAgICAgICAgICAgICAgICAgIG91dHB1dFtpXSA9IChiMCArIGIxICsgYjIgKyBiMyArIGI0ICsgYjUgKyBiNiArIHdoaXRlICogMC41MzYyKSAqIDAuMTE7CiAgICAgICAgICAgICAgICAgICAgYjYgPSB3aGl0ZSAqIDAuMTE1OTI2OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBub2lzZSA9IGF1ZGlvQ3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwogICAgICAgICAgICAgICAgbm9pc2UuYnVmZmVyID0gbm9pc2VCdWZmZXI7CiAgICAgICAgICAgICAgICBub2lzZS5sb29wID0gdHJ1ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgZ2FpbiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUgKiAwLjI1LCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG5vaXNlLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgICAgICAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBub2lzZS5zdGFydCgpOwogICAgICAgICAgICAgICAgY3VycmVudE5vZGVzLnB1c2gobm9pc2UsIGdhaW4pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbHVsbGFieTogKCkgPT4gewogICAgICAgICAgICAgICAgLy8gRmlsdGVyZWQgbWVsb2R5IGluIGZlbWFsZSB2b2ljZSByYW5nZSAoMzAwLTMwMDAgSHopCiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgcGVudGF0b25pYyBsdWxsYWJ5IHBhdHRlcm4KICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVzID0gWwogICAgICAgICAgICAgICAgICAgIHsgZnJlcTogMzkyLCBkdXI6IDAuOCB9LCAgLy8gRzQKICAgICAgICAgICAgICAgICAgICB7IGZyZXE6IDQ0MCwgZHVyOiAwLjQgfSwgIC8vIEE0CiAgICAgICAgICAgICAgICAgICAgeyBmcmVxOiAzOTIsIGR1cjogMC44IH0sICAvLyBHNAogICAgICAgICAgICAgICAgICAgIHsgZnJlcTogMzMwLCBkdXI6IDAuOCB9LCAgLy8gRTQKICAgICAgICAgICAgICAgICAgICB7IGZyZXE6IDI5NCwgZHVyOiAxLjIgfSwgIC8vIEQ0CiAgICAgICAgICAgICAgICAgICAgeyBmcmVxOiAzMzAsIGR1cjogMC44IH0sICAvLyBFNAogICAgICAgICAgICAgICAgICAgIHsgZnJlcTogMzkyLCBkdXI6IDEuNiB9LCAgLy8gRzQKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxldCBub3RlSW5kZXggPSAwOwogICAgICAgICAgICAgICAgbGV0IGlzUGxheWluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBsYXlOb3RlKCkgewogICAgICAgICAgICAgICAgICAgIGlmICghaXNQbGF5aW5nIHx8IGN1cnJlbnRNb2RlICE9PSAnbHVsbGFieScpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlID0gbm90ZXNbbm90ZUluZGV4XTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvc2MgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FpbiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBTb2Z0LCB3YXJtIHRvbmUKICAgICAgICAgICAgICAgICAgICBvc2MudHlwZSA9ICdzaW5lJzsKICAgICAgICAgICAgICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKG5vdGUuZnJlcSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNvZnQgYXR0YWNrIGFuZCByZWxlYXNlCiAgICAgICAgICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodm9sdW1lICogMC4xMiwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjEpOwogICAgICAgICAgICAgICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUgKiAwLjEyLCBhdWRpb0N0eC5jdXJyZW50VGltZSArIG5vdGUuZHVyIC0gMC4xNSk7CiAgICAgICAgICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgbm90ZS5kdXIpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB3YXJtdGggd2l0aCBoYXJtb25pYwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9zYzIgPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FpbjIgPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgICAgICAgICAgb3NjMi50eXBlID0gJ3NpbmUnOwogICAgICAgICAgICAgICAgICAgIG9zYzIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKG5vdGUuZnJlcSAqIDIsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICBnYWluMi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSAqIDAuMDIsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBvc2MuY29ubmVjdChnYWluKTsKICAgICAgICAgICAgICAgICAgICBvc2MyLmNvbm5lY3QoZ2FpbjIpOwogICAgICAgICAgICAgICAgICAgIGdhaW4yLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgICAgICAgICAgICAgZ2Fpbi5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBvc2Muc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICBvc2MyLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICAgICAgb3NjLnN0b3AoYXVkaW9DdHguY3VycmVudFRpbWUgKyBub3RlLmR1cik7CiAgICAgICAgICAgICAgICAgICAgb3NjMi5zdG9wKGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgbm90ZS5kdXIpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIG5vdGVJbmRleCA9IChub3RlSW5kZXggKyAxKSAlIG5vdGVzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBTbWFsbCBwYXVzZSBiZXR3ZWVuIG5vdGVzLCBsb25nZXIgcGF1c2UgYXQgZW5kIG9mIHBocmFzZQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdXNlID0gbm90ZUluZGV4ID09PSAwID8gMS41IDogMC4xOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocGxheU5vdGUsIChub3RlLmR1ciArIHBhdXNlKSAqIDEwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBwbGF5Tm90ZSgpOwogICAgICAgICAgICAgICAgY3VycmVudE5vZGVzLnB1c2goeyBzdG9wOiAoKSA9PiB7IGlzUGxheWluZyA9IGZhbHNlOyB9IH0pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgb2NlYW46ICgpID0+IHsKICAgICAgICAgICAgICAgIC8vIE9jZWFuIHdhdmVzIHVzaW5nIGZpbHRlcmVkIG5vaXNlIHdpdGggc2xvdyBtb2R1bGF0aW9uCiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJTaXplID0gMiAqIGF1ZGlvQ3R4LnNhbXBsZVJhdGU7CiAgICAgICAgICAgICAgICBjb25zdCBub2lzZUJ1ZmZlciA9IGF1ZGlvQ3R4LmNyZWF0ZUJ1ZmZlcigxLCBidWZmZXJTaXplLCBhdWRpb0N0eC5zYW1wbGVSYXRlKTsKICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IG5vaXNlQnVmZmVyLmdldENoYW5uZWxEYXRhKDApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlclNpemU7IGkrKykgewogICAgICAgICAgICAgICAgICAgIG91dHB1dFtpXSA9IE1hdGgucmFuZG9tKCkgKiAyIC0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3Qgbm9pc2UgPSBhdWRpb0N0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgICAgICAgICAgICAgIG5vaXNlLmJ1ZmZlciA9IG5vaXNlQnVmZmVyOwogICAgICAgICAgICAgICAgbm9pc2UubG9vcCA9IHRydWU7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIExvdy1wYXNzIGZpbHRlciBmb3Igb2NlYW4gZGVwdGgKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IGF1ZGlvQ3R4LmNyZWF0ZUJpcXVhZEZpbHRlcigpOwogICAgICAgICAgICAgICAgZmlsdGVyLnR5cGUgPSAnbG93cGFzcyc7CiAgICAgICAgICAgICAgICBmaWx0ZXIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDUwMCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgZmlsdGVyLlEuc2V0VmFsdWVBdFRpbWUoMSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBnYWluID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbHVtZSAqIDAuMiwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBXYXZlIG1vZHVsYXRpb24gLSBzbG93IHZvbHVtZSBjaGFuZ2VzCiAgICAgICAgICAgICAgICBjb25zdCBsZm8gPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgICAgICBjb25zdCBsZm9HYWluID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgICAgICAgICAgICAgbGZvLnR5cGUgPSAnc2luZSc7CiAgICAgICAgICAgICAgICBsZm8uZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDAuMDgsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsgLy8gVmVyeSBzbG93IHdhdmVzCiAgICAgICAgICAgICAgICBsZm9HYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lICogMC4xLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICBsZm8uY29ubmVjdChsZm9HYWluKTsKICAgICAgICAgICAgICAgIGxmb0dhaW4uY29ubmVjdChnYWluLmdhaW4pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgbW9kdWxhdGlvbiBmb3Igd2F2ZSAid2FzaGluZyIgZWZmZWN0CiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJMZm8gPSBhdWRpb0N0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJMZm9HYWluID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgICAgICAgICAgICAgZmlsdGVyTGZvLnR5cGUgPSAnc2luZSc7CiAgICAgICAgICAgICAgICBmaWx0ZXJMZm8uZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDAuMSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgZmlsdGVyTGZvR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDIwMCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgZmlsdGVyTGZvLmNvbm5lY3QoZmlsdGVyTGZvR2Fpbik7CiAgICAgICAgICAgICAgICBmaWx0ZXJMZm9HYWluLmNvbm5lY3QoZmlsdGVyLmZyZXF1ZW5jeSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG5vaXNlLmNvbm5lY3QoZmlsdGVyKTsKICAgICAgICAgICAgICAgIGZpbHRlci5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICAgICAgZ2Fpbi5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbm9pc2Uuc3RhcnQoKTsKICAgICAgICAgICAgICAgIGxmby5zdGFydCgpOwogICAgICAgICAgICAgICAgZmlsdGVyTGZvLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGN1cnJlbnROb2Rlcy5wdXNoKG5vaXNlLCBsZm8sIGZpbHRlckxmbywgZ2Fpbik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICAvLyBDcmVhdGUgZmxvYXRpbmcgcGFydGljbGVzCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGFydGljbGVzKCkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFydGljbGVzJyk7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGNvbG9ycyA9IFsKICAgICAgICAgICAgICAgICdyZ2JhKDEwMCwgMTUwLCAyMDAsIDAuMyknLAogICAgICAgICAgICAgICAgJ3JnYmEoMTUwLCAxMDAsIDIwMCwgMC4zKScsCiAgICAgICAgICAgICAgICAncmdiYSgxMDAsIDIwMCwgMTgwLCAwLjMpJwogICAgICAgICAgICBdOwogICAgICAgICAgICAKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgcGFydGljbGUuY2xhc3NOYW1lID0gJ3BhcnRpY2xlJzsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLndpZHRoID0gKDQgKyBNYXRoLnJhbmRvbSgpICogMTIpICsgJ3B4JzsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLmhlaWdodCA9IHBhcnRpY2xlLnN0eWxlLndpZHRoOwogICAgICAgICAgICAgICAgcGFydGljbGUuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvcnMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5sZWZ0ID0gTWF0aC5yYW5kb20oKSAqIDEwMCArICclJzsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLmFuaW1hdGlvbkR1cmF0aW9uID0gKDI1ICsgTWF0aC5yYW5kb20oKSAqIDM1KSArICdzJzsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLmFuaW1hdGlvbkRlbGF5ID0gTWF0aC5yYW5kb20oKSAqIDI1ICsgJ3MnOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBhcnRpY2xlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXJzCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNvdW5kLW1vZGUnKS5mb3JFYWNoKGJ0biA9PiB7CiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgICAgIGluaXRBdWRpbygpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBtb2RlID0gYnRuLmRhdGFzZXQubW9kZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVG9nZ2xlIG9mZgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSBtb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgc3RvcEFsbFNvdW5kcygpOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRNb2RlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc291bmQtbW9kZScpLmZvckVhY2goYiA9PiBiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50TW9kZUVsLnRleHRDb250ZW50ID0gJ1d5YmllcnogZMW6d2nEmWsnOwogICAgICAgICAgICAgICAgICAgIG1vZGVJbmZvRWwudGV4dENvbnRlbnQgPSAnJzsKICAgICAgICAgICAgICAgICAgICB0aW1lckVsLnRleHRDb250ZW50ID0gJzA6MDAnOwogICAgICAgICAgICAgICAgICAgIG9yYi5jbGFzc0xpc3QucmVtb3ZlKCdoZWFydGJlYXQnKTsKICAgICAgICAgICAgICAgICAgICBvcmIuY2xhc3NMaXN0LmFkZCgnYnJlYXRoaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBTdGFydCBuZXcKICAgICAgICAgICAgICAgIHN0b3BBbGxTb3VuZHMoKTsKICAgICAgICAgICAgICAgIGN1cnJlbnRNb2RlID0gbW9kZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNvdW5kLW1vZGUnKS5mb3JFYWNoKGIgPT4gYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGN1cnJlbnRNb2RlRWwudGV4dENvbnRlbnQgPSBtb2RlTmFtZXNbbW9kZV07CiAgICAgICAgICAgICAgICBtb2RlSW5mb0VsLnRleHRDb250ZW50ID0gJ0dyYWogcHJ6ZXogbWluaW11bSAxMC0xNSBtaW51dCBkbGEgZWZla3R1JzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc2V0T3JiU3R5bGUobW9kZSk7CiAgICAgICAgICAgICAgICBzb3VuZEdlbmVyYXRvcnNbbW9kZV0oKTsKICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBTaG93IGluZm8gb24gaG92ZXIKICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBpbmZvUGFuZWxUaXRsZS50ZXh0Q29udGVudCA9IG1vZGVOYW1lc1tidG4uZGF0YXNldC5tb2RlXTsKICAgICAgICAgICAgICAgIGluZm9QYW5lbFRleHQudGV4dENvbnRlbnQgPSBidG4uZGF0YXNldC5pbmZvOwogICAgICAgICAgICAgICAgaW5mb1BhbmVsLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHsKICAgICAgICAgICAgICAgIGluZm9QYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICB2b2x1bWVTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4gewogICAgICAgICAgICB2b2x1bWUgPSBlLnRhcmdldC52YWx1ZSAvIDEwMDsKICAgICAgICB9KTsKCiAgICAgICAgaGVscEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgYWxlcnQoYPCfp5ggU3RyZWZhIFNwb2tvanUgLSBXc2thesOzd2tpCgrigKIgU2VzamEgcG93aW5uYSB0cndhxIcgMTAtMTUgbWludXQgbWluaW11bQrigKIgVcW8eXdhaiB3IGNpY2h5bSwgcHJ6eWNpZW1uaW9ueW0gcG9taWVzemN6ZW5pdQrigKIgR8WCb8Wbbm/Fm8SHIHBvd2lubmEgYnnEhyBrb21mb3J0b3dhLCBuaWUgemEgZ8WCb8WbbmEK4oCiIE1vxbxlc3ogdcW8eXdhxIcgcmF6ZW0geiBkemllY2tpZW0K4oCiIE5hamxlcGllaiBwcnpleiBnxYJvxZtuaWtpLCBuaWUgc8WCdWNoYXdraSAoZGxhIG1hxYJ5Y2ggZHppZWNpKQoKRMW6d2nEmWtpIG9wYXJ0ZSBuYSBiYWRhbmlhY2ggbmF1a293eWNoIGRvdHljesSFY3ljaCB0ZXJhcGlpIGTFundpxJlraWVtIGRsYSBkemllY2kgeiBhdXR5em1lbS5gKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gRnVsbHNjcmVlbgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKCkgPT4gewogICAgICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gSW5pdAogICAgICAgIGNyZWF0ZVBhcnRpY2xlcygpOwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=",
            slowa: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InBsIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+U8WCb3dhIGkgT2JyYXpraTwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICB9CgogICAgICAgIGJvZHkgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMGEwYTE1IDAlLCAjMTIxMjFmIDEwMCUpOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgc2Fucy1zZXJpZjsKICAgICAgICB9CgogICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICB3aWR0aDogMTAwdnc7CiAgICAgICAgICAgIGhlaWdodDogMTAwdmg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLyogU2V0dXAgc2NyZWVuIGZvciBMZW9uJ3MgcGhvdG8gKi8KICAgICAgICAuc2V0dXAtc2NyZWVuIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwYTBhMTU7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXM7CiAgICAgICAgfQoKICAgICAgICAuc2V0dXAtc2NyZWVuLmhpZGRlbiB7CiAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgIH0KCiAgICAgICAgLnNldHVwLXRpdGxlIHsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTsKICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogMzAwOwogICAgICAgIH0KCiAgICAgICAgLnBob3RvLXVwbG9hZC1hcmVhIHsKICAgICAgICAgICAgd2lkdGg6IDIwMHB4OwogICAgICAgICAgICBoZWlnaHQ6IDIwMHB4OwogICAgICAgICAgICBib3JkZXI6IDNweCBkYXNoZWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgICAgIH0KCiAgICAgICAgLnBob3RvLXVwbG9hZC1hcmVhOmhvdmVyIHsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICB9CgogICAgICAgIC5waG90by11cGxvYWQtYXJlYS5oYXMtcGhvdG8gewogICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHJnYmEoMTAwLCAyNTUsIDE1MCwgMC41KTsKICAgICAgICB9CgogICAgICAgIC5waG90by11cGxvYWQtYXJlYSBpbWcgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgICAgICB9CgogICAgICAgIC51cGxvYWQtaWNvbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogNTBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICB9CgogICAgICAgIC51cGxvYWQtdGV4dCB7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBwYWRkaW5nOiAwIDIwcHg7CiAgICAgICAgfQoKICAgICAgICAjcGhvdG9JbnB1dCB7CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAuc2V0dXAtYnV0dG9ucyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogMjBweDsKICAgICAgICB9CgogICAgICAgIC5zZXR1cC1idG4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNGE1YTZhLCAjM2E0YTVhKTsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzZhN2E4YTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDQwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDQwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICB9CgogICAgICAgIC5zZXR1cC1idG46aG92ZXIgewogICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMzBweCByZ2JhKDEwMCwgMTUwLCAyMDAsIDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuc2V0dXAtYnRuLnNlY29uZGFyeSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7CiAgICAgICAgfQoKICAgICAgICAuc2V0dXAtaW5mbyB7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNCk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBtYXgtd2lkdGg6IDQwMHB4OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICAgIH0KCiAgICAgICAgLyogTWFpbiBnYW1lIGFyZWEgKi8KICAgICAgICAuZ2FtZS1hcmVhIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7CiAgICAgICAgfQoKICAgICAgICAuaW5zdHJ1Y3Rpb24gewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpOwogICAgICAgICAgICBmb250LXNpemU6IDI0cHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDQwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgbWluLWhlaWdodDogMzZweDsKICAgICAgICB9CgogICAgICAgIC5pbnN0cnVjdGlvbi5oaWdobGlnaHQgewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDIyMCwgMTAwLCAwLjkpOwogICAgICAgICAgICBmb250LXNpemU6IDI4cHg7CiAgICAgICAgfQoKICAgICAgICAvKiBJdGVtcyBncmlkICovCiAgICAgICAgLml0ZW1zLWdyaWQgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBnYXA6IDMwcHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDQwcHg7CiAgICAgICAgfQoKICAgICAgICAuaXRlbS1jYXJkIHsKICAgICAgICAgICAgd2lkdGg6IDE4MHB4OwogICAgICAgICAgICBoZWlnaHQ6IDIyMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgICAgICAgICBib3JkZXI6IDNweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLml0ZW0tY2FyZDpob3ZlciB7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpOwogICAgICAgIH0KCiAgICAgICAgLml0ZW0tY2FyZC5jb3JyZWN0IHsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2JhKDEwMCwgMjU1LCAxNTAsIDAuOCk7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTAwLCAyNTUsIDE1MCwgMC4xNSk7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCA0MHB4IHJnYmEoMTAwLCAyNTUsIDE1MCwgMC4zKTsKICAgICAgICB9CgogICAgICAgIC5pdGVtLWNhcmQuYm91bmNpbmcgLml0ZW0taWNvbiB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogYm91bmNlIDAuNXMgZWFzZS1pbi1vdXQgaW5maW5pdGU7CiAgICAgICAgfQoKICAgICAgICAuaXRlbS1jYXJkLm1lZ2EtYm91bmNlIC5pdGVtLWljb24gewogICAgICAgICAgICBhbmltYXRpb246IG1lZ2FCb3VuY2UgMC42cyBlYXNlLWluLW91dCBpbmZpbml0ZTsKICAgICAgICB9CgogICAgICAgIEBrZXlmcmFtZXMgYm91bmNlIHsKICAgICAgICAgICAgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCkgc2NhbGUoMSk7IH0KICAgICAgICAgICAgNTAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xNXB4KSBzY2FsZSgxLjEpOyB9CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIG1lZ2FCb3VuY2UgewogICAgICAgICAgICAwJSwgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKSBzY2FsZSgxKSByb3RhdGUoMGRlZyk7IH0KICAgICAgICAgICAgMjUlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0yNXB4KSBzY2FsZSgxLjIpIHJvdGF0ZSgtNWRlZyk7IH0KICAgICAgICAgICAgNzUlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0yNXB4KSBzY2FsZSgxLjIpIHJvdGF0ZSg1ZGVnKTsgfQogICAgICAgIH0KCiAgICAgICAgLml0ZW0taWNvbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogODBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3M7CiAgICAgICAgfQoKICAgICAgICAuaXRlbS1jYXJkLmxlb24gLml0ZW0taWNvbiB7CiAgICAgICAgICAgIHdpZHRoOiAxMDBweDsKICAgICAgICAgICAgaGVpZ2h0OiAxMDBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgICAgIH0KCiAgICAgICAgLml0ZW0tY2FyZC5sZW9uIC5pdGVtLWljb24gaW1nIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7CiAgICAgICAgfQoKICAgICAgICAuaXRlbS1sYWJlbCB7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjJweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzOwogICAgICAgIH0KCiAgICAgICAgLml0ZW0tY2FyZC5zaG93LWxhYmVsIC5pdGVtLWxhYmVsIHsKICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICB9CgogICAgICAgIC8qIEZsb2F0aW5nIHdvcmQgZGlzcGxheSAqLwogICAgICAgIC5mbG9hdGluZy13b3JkIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDUwJTsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMjBweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTsKICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMCA2MHB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIHotaW5kZXg6IDEwMDsKICAgICAgICAgICAgYW5pbWF0aW9uOiB3b3JkQXBwZWFyIDJzIGVhc2Utb3V0IGZvcndhcmRzOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyB3b3JkQXBwZWFyIHsKICAgICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSBzY2FsZSgwLjUpOyB9CiAgICAgICAgICAgIDIwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKDEuMSk7IH0KICAgICAgICAgICAgODAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSkgc2NhbGUoMSk7IH0KICAgICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC02MCUpIHNjYWxlKDAuOSk7IH0KICAgICAgICB9CgogICAgICAgIC8qIENlbGVicmF0aW9uIHBhcnRpY2xlcyAqLwogICAgICAgIC5wYXJ0aWNsZSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgYW5pbWF0aW9uOiBwYXJ0aWNsZUZseSAxLjVzIGVhc2Utb3V0IGZvcndhcmRzOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBwYXJ0aWNsZUZseSB7CiAgICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgMCkgc2NhbGUoMSk7IG9wYWNpdHk6IDE7IH0KICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKHZhcigtLXR4KSwgdmFyKC0tdHkpKSBzY2FsZSgwKTsgb3BhY2l0eTogMDsgfQogICAgICAgIH0KCiAgICAgICAgLnN0YXIgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogNDBweDsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgIGFuaW1hdGlvbjogc3RhckZsb2F0IDEuNXMgZWFzZS1vdXQgZm9yd2FyZHM7CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIHN0YXJGbG9hdCB7CiAgICAgICAgICAgIDAlIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiBzY2FsZSgwKSByb3RhdGUoMGRlZyk7IH0KICAgICAgICAgICAgMzAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiBzY2FsZSgxLjIpIHJvdGF0ZSgyMGRlZyk7IH0KICAgICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTAwcHgpIHNjYWxlKDAuNSkgcm90YXRlKDE4MGRlZyk7IH0KICAgICAgICB9CgogICAgICAgIC8qIFNjb3JlICovCiAgICAgICAgLnNjb3JlLWRpc3BsYXkgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMzBweDsKICAgICAgICAgICAgcmlnaHQ6IDMwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQpOwogICAgICAgIH0KCiAgICAgICAgLnNjb3JlLWRpc3BsYXkgLnNjb3JlIHsKICAgICAgICAgICAgZm9udC1zaXplOiA0OHB4OwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpOwogICAgICAgIH0KCiAgICAgICAgLyogQ29udHJvbHMgKi8KICAgICAgICAuY29udHJvbHMgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIGJvdHRvbTogMzBweDsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogMTVweDsKICAgICAgICB9CgogICAgICAgIC5jb250cm9sLWJ0biB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDI1cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgICB9CgogICAgICAgIC5jb250cm9sLWJ0bjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8IS0tIFNldHVwIHNjcmVlbiBmb3IgTGVvbidzIHBob3RvIC0tPgogICAgPGRpdiBjbGFzcz0ic2V0dXAtc2NyZWVuIiBpZD0ic2V0dXBTY3JlZW4iPgogICAgICAgIDxoMSBjbGFzcz0ic2V0dXAtdGl0bGUiPkRvZGFqIHpkasSZY2llIExlb25hPC9oMT4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJwaG90by11cGxvYWQtYXJlYSIgaWQ9InBob3RvVXBsb2FkQXJlYSI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ1cGxvYWQtaWNvbiI+8J+Ttzwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InVwbG9hZC10ZXh0Ij5LbGlrbmlqIGFieSBkb2RhxIcgemRqxJljaWU8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJwaG90b0lucHV0IiBhY2NlcHQ9ImltYWdlLyoiPgoKICAgICAgICA8ZGl2IGNsYXNzPSJzZXR1cC1idXR0b25zIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2V0dXAtYnRuIHNlY29uZGFyeSIgaWQ9InNraXBQaG90b0J0biI+UG9tacWEPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNldHVwLWJ0biIgaWQ9InN0YXJ0V2l0aFBob3RvQnRuIj5Sb3pwb2N6bmlqPC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxwIGNsYXNzPSJzZXR1cC1pbmZvIj4KICAgICAgICAgICAgR2R5IExlb24ga2xpa25pZSBuYSBzd29qZSB6ZGrEmWNpZSwgdXPFgnlzenkgc3dvamUgaW1pxJkuPGJyPgogICAgICAgICAgICBUbyBwb21vxbxlIG11IHBvxYLEhWN6ecSHIHN3b2rEhSB0d2FyeiB6IGltaWVuaWVtLgogICAgICAgIDwvcD4KICAgIDwvZGl2PgoKICAgIDwhLS0gTWFpbiBnYW1lIC0tPgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIiBpZD0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJnYW1lLWFyZWEiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnN0cnVjdGlvbiIgaWQ9Imluc3RydWN0aW9uIj5LbGlrbmlqIG5hIG9icmF6ZWshPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpdGVtcy1ncmlkIiBpZD0iaXRlbXNHcmlkIj4KICAgICAgICAgICAgICAgIDwhLS0gSXRlbXMgd2lsbCBiZSBnZW5lcmF0ZWQgaGVyZSAtLT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9InNjb3JlLWRpc3BsYXkiPgogICAgICAgICAgICA8ZGl2PlB1bmt0eTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzY29yZSIgaWQ9InNjb3JlIj4wPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJjb250cm9scyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY29udHJvbC1idG4iIGlkPSJuZXdSb3VuZEJ0biI+Tm93YSBydW5kYTwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9ImNvbnRyb2wtYnRuIiBpZD0ic2V0dGluZ3NCdG4iPuKamSBaZGrEmWNpZSBMZW9uYTwvYnV0dG9uPgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICAvLyBBdWRpbyBzZXR1cAogICAgICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICBsZXQgYXVkaW9DdHggPSBudWxsOwoKICAgICAgICBmdW5jdGlvbiBpbml0QXVkaW8oKSB7CiAgICAgICAgICAgIGlmICghYXVkaW9DdHgpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhdWRpb0N0eC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHsKICAgICAgICAgICAgICAgIGF1ZGlvQ3R4LnJlc3VtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBTcGVlY2ggc3ludGhlc2lzCiAgICAgICAgY29uc3Qgc3ludGggPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzOwogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHNwZWFrKHRleHQsIHJhdGUgPSAwLjgsIHBpdGNoID0gMS4xKSB7CiAgICAgICAgICAgIC8vIENhbmNlbCBhbnkgb25nb2luZyBzcGVlY2gKICAgICAgICAgICAgc3ludGguY2FuY2VsKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB1dHRlcmFuY2UgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKHRleHQpOwogICAgICAgICAgICB1dHRlcmFuY2UubGFuZyA9ICdwbC1QTCc7CiAgICAgICAgICAgIHV0dGVyYW5jZS5yYXRlID0gcmF0ZTsgIC8vIFNsb3dlciBmb3IgY2xhcml0eQogICAgICAgICAgICB1dHRlcmFuY2UucGl0Y2ggPSBwaXRjaDsgLy8gU2xpZ2h0bHkgaGlnaGVyLCBmcmllbmRsaWVyCiAgICAgICAgICAgIHV0dGVyYW5jZS52b2x1bWUgPSAxOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgUG9saXNoIHZvaWNlCiAgICAgICAgICAgIGNvbnN0IHZvaWNlcyA9IHN5bnRoLmdldFZvaWNlcygpOwogICAgICAgICAgICBjb25zdCBwb2xpc2hWb2ljZSA9IHZvaWNlcy5maW5kKHYgPT4gdi5sYW5nLnN0YXJ0c1dpdGgoJ3BsJykpOwogICAgICAgICAgICBpZiAocG9saXNoVm9pY2UpIHsKICAgICAgICAgICAgICAgIHV0dGVyYW5jZS52b2ljZSA9IHBvbGlzaFZvaWNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBzeW50aC5zcGVhayh1dHRlcmFuY2UpOwogICAgICAgICAgICByZXR1cm4gdXR0ZXJhbmNlOwogICAgICAgIH0KCiAgICAgICAgLy8gSXRlbXMgZGF0YWJhc2UKICAgICAgICBjb25zdCBpdGVtcyA9IFsKICAgICAgICAgICAgeyBpZDogJ3BpbGthJywgaWNvbjogJ+KavScsIHdvcmQ6ICdwacWCa2EnIH0sCiAgICAgICAgICAgIHsgaWQ6ICdhdXRvJywgaWNvbjogJ/CfmpcnLCB3b3JkOiAnYXV0bycgfSwKICAgICAgICAgICAgeyBpZDogJ3BpZXMnLCBpY29uOiAn8J+QlScsIHdvcmQ6ICdwaWVzJyB9LAogICAgICAgICAgICB7IGlkOiAna290JywgaWNvbjogJ/CfkLEnLCB3b3JkOiAna290JyB9LAogICAgICAgICAgICB7IGlkOiAnZG9tJywgaWNvbjogJ/Cfj6AnLCB3b3JkOiAnZG9tJyB9LAogICAgICAgICAgICB7IGlkOiAnc2xvbmNlJywgaWNvbjogJ+KYgO+4jycsIHdvcmQ6ICdzxYJvxYRjZScgfSwKICAgICAgICAgICAgeyBpZDogJ2t3aWF0JywgaWNvbjogJ/CfjLgnLCB3b3JkOiAna3dpYXQnIH0sCiAgICAgICAgICAgIHsgaWQ6ICdqYWJsa28nLCBpY29uOiAn8J+NjicsIHdvcmQ6ICdqYWLFgmtvJyB9LAogICAgICAgICAgICB7IGlkOiAnYmFuYW4nLCBpY29uOiAn8J+NjCcsIHdvcmQ6ICdiYW5hbicgfSwKICAgICAgICAgICAgeyBpZDogJ21pcycsIGljb246ICfwn6e4Jywgd29yZDogJ21pxZsnIH0sCiAgICAgICAgICAgIHsgaWQ6ICdyeWJhJywgaWNvbjogJ/CfkJ8nLCB3b3JkOiAncnliYScgfSwKICAgICAgICAgICAgeyBpZDogJ3B0YWsnLCBpY29uOiAn8J+QpicsIHdvcmQ6ICdwdGFrJyB9LAogICAgICAgICAgICB7IGlkOiAnZHJ6ZXdvJywgaWNvbjogJ/CfjLMnLCB3b3JkOiAnZHJ6ZXdvJyB9LAogICAgICAgICAgICB7IGlkOiAna3NpZXp5YycsIGljb246ICfwn4yZJywgd29yZDogJ2tzacSZxbx5YycgfSwKICAgICAgICAgICAgeyBpZDogJ2d3aWF6ZGEnLCBpY29uOiAn4q2QJywgd29yZDogJ2d3aWF6ZGEnIH0sCiAgICAgICAgXTsKCiAgICAgICAgLy8gU3RhdGUKICAgICAgICBsZXQgbGVvblBob3RvID0gbnVsbDsKICAgICAgICBsZXQgc2NvcmUgPSAwOwogICAgICAgIGxldCBjdXJyZW50SXRlbXMgPSBbXTsKCiAgICAgICAgLy8gRWxlbWVudHMKICAgICAgICBjb25zdCBzZXR1cFNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXR1cFNjcmVlbicpOwogICAgICAgIGNvbnN0IHBob3RvVXBsb2FkQXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG90b1VwbG9hZEFyZWEnKTsKICAgICAgICBjb25zdCBwaG90b0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bob3RvSW5wdXQnKTsKICAgICAgICBjb25zdCBza2lwUGhvdG9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2tpcFBob3RvQnRuJyk7CiAgICAgICAgY29uc3Qgc3RhcnRXaXRoUGhvdG9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRXaXRoUGhvdG9CdG4nKTsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJyk7CiAgICAgICAgY29uc3QgaXRlbXNHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW1zR3JpZCcpOwogICAgICAgIGNvbnN0IGluc3RydWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3RydWN0aW9uJyk7CiAgICAgICAgY29uc3Qgc2NvcmVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpOwogICAgICAgIGNvbnN0IG5ld1JvdW5kQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld1JvdW5kQnRuJyk7CiAgICAgICAgY29uc3Qgc2V0dGluZ3NCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dGluZ3NCdG4nKTsKCiAgICAgICAgY29uc3QgY29sb3JzID0gWycjZmY2YjZiJywgJyM0ZWNkYzQnLCAnI2ZmZTY2ZCcsICcjOTVlMWQzJywgJyNkZGEwZGQnLCAnIzg3Y2VlYicsICcjZjhiNTAwJ107CgogICAgICAgIC8vIFBob3RvIGhhbmRsaW5nCiAgICAgICAgcGhvdG9VcGxvYWRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICBwaG90b0lucHV0LmNsaWNrKCk7CiAgICAgICAgfSk7CgogICAgICAgIHBob3RvSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHsKICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICBpZiAoZmlsZSkgewogICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZW9uUGhvdG8gPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgICAgIHBob3RvVXBsb2FkQXJlYS5pbm5lckhUTUwgPSBgPGltZyBzcmM9IiR7bGVvblBob3RvfSIgYWx0PSJMZW9uIj5gOwogICAgICAgICAgICAgICAgICAgIHBob3RvVXBsb2FkQXJlYS5jbGFzc0xpc3QuYWRkKCdoYXMtcGhvdG8nKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBza2lwUGhvdG9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgICAgIHNldHVwU2NyZWVuLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICBnZW5lcmF0ZVJvdW5kKCk7CiAgICAgICAgfSk7CgogICAgICAgIHN0YXJ0V2l0aFBob3RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICBzZXR1cFNjcmVlbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgZ2VuZXJhdGVSb3VuZCgpOwogICAgICAgIH0pOwoKICAgICAgICBzZXR0aW5nc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgc2V0dXBTY3JlZW4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIEdhbWUgZnVuY3Rpb25zCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVSb3VuZCgpIHsKICAgICAgICAgICAgaXRlbXNHcmlkLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUGljayAzIHJhbmRvbSBpdGVtcyArIExlb24gaWYgcGhvdG8gZXhpc3RzCiAgICAgICAgICAgIGNvbnN0IHNodWZmbGVkID0gWy4uLml0ZW1zXS5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpOwogICAgICAgICAgICBjdXJyZW50SXRlbXMgPSBzaHVmZmxlZC5zbGljZSgwLCBsZW9uUGhvdG8gPyAzIDogNCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBBZGQgTGVvbiBjYXJkIGlmIHBob3RvIGV4aXN0cwogICAgICAgICAgICBpZiAobGVvblBob3RvKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50SXRlbXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6ICdsZW9uJywKICAgICAgICAgICAgICAgICAgICBpY29uOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHdvcmQ6ICdMZW9uJywKICAgICAgICAgICAgICAgICAgICBpc0xlb246IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTaHVmZmxlIGFnYWluIHRvIHJhbmRvbWl6ZSBMZW9uJ3MgcG9zaXRpb24KICAgICAgICAgICAgY3VycmVudEl0ZW1zLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDcmVhdGUgY2FyZHMKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTmFtZSA9ICdpdGVtLWNhcmQnICsgKGl0ZW0uaXNMZW9uID8gJyBsZW9uJyA6ICcnKTsKICAgICAgICAgICAgICAgIGNhcmQuZGF0YXNldC5pZCA9IGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICBjYXJkLmRhdGFzZXQud29yZCA9IGl0ZW0ud29yZDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgaWNvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgaWNvbkRpdi5jbGFzc05hbWUgPSAnaXRlbS1pY29uJzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNMZW9uICYmIGxlb25QaG90bykgewogICAgICAgICAgICAgICAgICAgIGljb25EaXYuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSIke2xlb25QaG90b30iIGFsdD0iTGVvbiI+YDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWNvbkRpdi50ZXh0Q29udGVudCA9IGl0ZW0uaWNvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGxhYmVsLmNsYXNzTmFtZSA9ICdpdGVtLWxhYmVsJzsKICAgICAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gaXRlbS53b3JkOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGljb25EaXYpOwogICAgICAgICAgICAgICAgY2FyZC5hcHBlbmRDaGlsZChsYWJlbCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBoYW5kbGVJdGVtQ2xpY2soY2FyZCwgaXRlbSkpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpdGVtc0dyaWQuYXBwZW5kQ2hpbGQoY2FyZCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaW5zdHJ1Y3Rpb24udGV4dENvbnRlbnQgPSAnS2xpa25paiBuYSBvYnJhemVrISc7CiAgICAgICAgICAgIGluc3RydWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlSXRlbUNsaWNrKGNhcmQsIGl0ZW0pIHsKICAgICAgICAgICAgaW5pdEF1ZGlvKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBWaXN1YWwgZmVlZGJhY2sKICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdib3VuY2luZycsICdzaG93LWxhYmVsJywgJ2NvcnJlY3QnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEV4dHJhIHNwZWNpYWwgZm9yIExlb24KICAgICAgICAgICAgaWYgKGl0ZW0uaXNMZW9uKSB7CiAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvdW5jaW5nJyk7CiAgICAgICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ21lZ2EtYm91bmNlJyk7CiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbi50ZXh0Q29udGVudCA9ICdUbyBMRU9OISDwn4yfJzsKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZ2hsaWdodCcpOwogICAgICAgICAgICAgICAgY3JlYXRlTWVnYUNlbGVicmF0aW9uKGNhcmQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTcGVhayB0aGUgd29yZAogICAgICAgICAgICBjb25zdCB1dHRlcmFuY2UgPSBzcGVhayhpdGVtLndvcmQpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2hvdyBmbG9hdGluZyB3b3JkCiAgICAgICAgICAgIHNob3dGbG9hdGluZ1dvcmQoaXRlbS53b3JkKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFBsYXkgc3VjY2VzcyBzb3VuZAogICAgICAgICAgICBwbGF5U3VjY2Vzc1NvdW5kKGl0ZW0uaXNMZW9uKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFNjb3JlCiAgICAgICAgICAgIHNjb3JlKys7CiAgICAgICAgICAgIHNjb3JlRWwudGV4dENvbnRlbnQgPSBzY29yZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENyZWF0ZSBwYXJ0aWNsZXMKICAgICAgICAgICAgY3JlYXRlUGFydGljbGVzKGNhcmQsIGl0ZW0uaXNMZW9uKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJlc2V0IGFmdGVyIGFuaW1hdGlvbgogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm91bmNpbmcnLCAnbWVnYS1ib3VuY2UnLCAnY29ycmVjdCcpOwogICAgICAgICAgICAgICAgLy8gS2VlcCBsYWJlbCB2aXNpYmxlIGZvciBsZWFybmluZwogICAgICAgICAgICB9LCBpdGVtLmlzTGVvbiA/IDMwMDAgOiAyMDAwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNob3dGbG9hdGluZ1dvcmQod29yZCkgewogICAgICAgICAgICBjb25zdCBmbG9hdGluZ1dvcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgZmxvYXRpbmdXb3JkLmNsYXNzTmFtZSA9ICdmbG9hdGluZy13b3JkJzsKICAgICAgICAgICAgZmxvYXRpbmdXb3JkLnRleHRDb250ZW50ID0gd29yZDsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmbG9hdGluZ1dvcmQpOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGZsb2F0aW5nV29yZC5yZW1vdmUoKSwgMjAwMCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwbGF5U3VjY2Vzc1NvdW5kKGlzU3BlY2lhbCA9IGZhbHNlKSB7CiAgICAgICAgICAgIGluaXRBdWRpbygpOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgYmFzZU5vdGVzID0gaXNTcGVjaWFsIAogICAgICAgICAgICAgICAgPyBbNTIzLjI1LCA2NTkuMjUsIDc4My45OSwgMTA0Ni41MF0gLy8gQzUsIEU1LCBHNSwgQzYgLSBiaWdnZXIgY2hvcmQKICAgICAgICAgICAgICAgIDogWzUyMy4yNSwgNjU5LjI1LCA3ODMuOTldOyAvLyBDNSwgRTUsIEc1CiAgICAgICAgICAgIAogICAgICAgICAgICBiYXNlTm90ZXMuZm9yRWFjaCgoZnJlcSwgaSkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3NjID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhaW4gPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgICAgICAgICAgb3NjLnR5cGUgPSAnc2luZSc7CiAgICAgICAgICAgICAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZShmcmVxLCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKGlzU3BlY2lhbCA/IDAuMzUgOiAwLjI1LCBhdWRpb0N0eC5jdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAoaXNTcGVjaWFsID8gMS41IDogMSkpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEFkZCB3YXJtdGgKICAgICAgICAgICAgICAgICAgICBjb25zdCBvc2MyID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgICAgICAgICAgICAgIG9zYzIudHlwZSA9ICdzaW5lJzsKICAgICAgICAgICAgICAgICAgICBvc2MyLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZShmcmVxICogMiwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhaW4yID0gYXVkaW9DdHguY3JlYXRlR2FpbigpOwogICAgICAgICAgICAgICAgICAgIGdhaW4yLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4wOCwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICAgICAgICAgIG9zYzIuY29ubmVjdChnYWluMik7CiAgICAgICAgICAgICAgICAgICAgZ2FpbjIuY29ubmVjdChnYWluKTsKICAgICAgICAgICAgICAgICAgICBnYWluLmNvbm5lY3QoYXVkaW9DdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIG9zYy5zdGFydCgpOwogICAgICAgICAgICAgICAgICAgIG9zYzIuc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICBvc2Muc3RvcChhdWRpb0N0eC5jdXJyZW50VGltZSArIDEuNSk7CiAgICAgICAgICAgICAgICAgICAgb3NjMi5zdG9wKGF1ZGlvQ3R4LmN1cnJlbnRUaW1lICsgMS41KTsKICAgICAgICAgICAgICAgIH0sIGkgKiAxMDApOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBhcnRpY2xlcyhjYXJkLCBpc1NwZWNpYWwgPSBmYWxzZSkgewogICAgICAgICAgICBjb25zdCByZWN0ID0gY2FyZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgY29uc3QgY2VudGVyWCA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyOwogICAgICAgICAgICBjb25zdCBjZW50ZXJZID0gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDI7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBwYXJ0aWNsZUNvdW50ID0gaXNTcGVjaWFsID8gMzAgOiAxNTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljbGVDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgcGFydGljbGUuY2xhc3NOYW1lID0gJ3BhcnRpY2xlJzsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLndpZHRoID0gKDggKyBNYXRoLnJhbmRvbSgpICogMTApICsgJ3B4JzsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLmhlaWdodCA9IHBhcnRpY2xlLnN0eWxlLndpZHRoOwogICAgICAgICAgICAgICAgcGFydGljbGUuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvcnMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5sZWZ0ID0gY2VudGVyWCArICdweCc7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS50b3AgPSBjZW50ZXJZICsgJ3B4JzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAvIHBhcnRpY2xlQ291bnQpICogTWF0aC5QSSAqIDI7CiAgICAgICAgICAgICAgICBjb25zdCB2ZWxvY2l0eSA9IChpc1NwZWNpYWwgPyAxNTAgOiAxMDApICsgTWF0aC5yYW5kb20oKSAqIDEwMDsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLnNldFByb3BlcnR5KCctLXR4JywgTWF0aC5jb3MoYW5nbGUpICogdmVsb2NpdHkgKyAncHgnKTsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLnNldFByb3BlcnR5KCctLXR5JywgTWF0aC5zaW4oYW5nbGUpICogdmVsb2NpdHkgKyAncHgnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwYXJ0aWNsZSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBhcnRpY2xlLnJlbW92ZSgpLCAxNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTWVnYUNlbGVicmF0aW9uKGNhcmQpIHsKICAgICAgICAgICAgY29uc3QgcmVjdCA9IGNhcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgIGNvbnN0IGNlbnRlclggPSByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMjsKICAgICAgICAgICAgY29uc3QgY2VudGVyWSA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU3RhcnMKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgc3Rhci5jbGFzc05hbWUgPSAnc3Rhcic7CiAgICAgICAgICAgICAgICAgICAgc3Rhci50ZXh0Q29udGVudCA9ICfirZAnOwogICAgICAgICAgICAgICAgICAgIHN0YXIuc3R5bGUubGVmdCA9IChjZW50ZXJYIC0gMTAwICsgTWF0aC5yYW5kb20oKSAqIDIwMCkgKyAncHgnOwogICAgICAgICAgICAgICAgICAgIHN0YXIuc3R5bGUudG9wID0gKGNlbnRlclkgLSA1MCArIE1hdGgucmFuZG9tKCkgKiAxMDApICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0YXIpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc3Rhci5yZW1vdmUoKSwgMTUwMCk7CiAgICAgICAgICAgICAgICB9LCBpICogMTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gQ29udHJvbHMKICAgICAgICBuZXdSb3VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGdlbmVyYXRlUm91bmQpOwoKICAgICAgICAvLyBMb2FkIHZvaWNlcwogICAgICAgIHNwZWVjaFN5bnRoZXNpcy5vbnZvaWNlc2NoYW5nZWQgPSAoKSA9PiB7CiAgICAgICAgICAgIC8vIFZvaWNlcyBsb2FkZWQKICAgICAgICB9OwoKICAgICAgICAvLyBGdWxsc2NyZWVuCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoZSkgPT4gewogICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnNldHVwLXNjcmVlbicpIHx8IGUudGFyZ2V0LmNsb3Nlc3QoJy5pdGVtLWNhcmQnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K",
            dzwiek: "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InBsIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyI+CiAgICA8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlIiBjb250ZW50PSJ5ZXMiPgogICAgPHRpdGxlPkdpdGFyYSBExbp3acSZa3U8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgICogewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgIH0KCiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAtd2Via2l0LWZpbGwtYXZhaWxhYmxlOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBzYW5zLXNlcmlmOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgfQoKICAgICAgICAuY29udGFpbmVyIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMDAwMDAwIDAlLCAjMWEwYTJlIDUwJSwgIzAwMDAwMCAxMDAlKTsKICAgICAgICB9CgogICAgICAgIC8qIEd1aXRhciBIZXJvIHN0eWxlIHN0cmluZ3MgLSB2ZXJ0aWNhbCAqLwogICAgICAgIC5zdHJpbmdzLWNvbnRhaW5lciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgd2lkdGg6IDkwJTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA0MDBweDsKICAgICAgICAgICAgaGVpZ2h0OiA4MCU7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOwogICAgICAgICAgICBhbGlnbi1pdGVtczogc3RyZXRjaDsKICAgICAgICAgICAgcGFkZGluZzogMCAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLnN0cmluZy10cmFjayB7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgZmxleDogMTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luOiAwIDJweDsKICAgICAgICB9CgogICAgICAgIC8qIFZlcnRpY2FsIHN0cmluZyBsaW5lICovCiAgICAgICAgLnN0cmluZy1saW5lIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGJvdHRvbTogMDsKICAgICAgICAgICAgd2lkdGg6IDRweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgdHJhbnNwYXJlbnQsIHZhcigtLXN0cmluZy1jb2xvcikgMjAlLCB2YXIoLS1zdHJpbmctY29sb3IpIDgwJSwgdHJhbnNwYXJlbnQpOwogICAgICAgICAgICBvcGFjaXR5OiAwLjM7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsKICAgICAgICB9CgogICAgICAgIC8qIEhpdCB6b25lIGF0IGJvdHRvbSAqLwogICAgICAgIC5oaXQtem9uZSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgYm90dG9tOiA2MHB4OwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgd2lkdGg6IDUwcHg7CiAgICAgICAgICAgIGhlaWdodDogNTBweDsKICAgICAgICAgICAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tc3RyaW5nLWNvbG9yKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBvcGFjaXR5OiAwLjU7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAyMHB4IHZhcigtLXN0cmluZy1jb2xvcik7CiAgICAgICAgfQoKICAgICAgICAvKiBBY3RpdmUgaW5kaWNhdG9yIChnbG93cyB3aGVuIHNvdW5kIGRldGVjdGVkKSAqLwogICAgICAgIC5zdHJpbmctaW5kaWNhdG9yIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBib3R0b206IDYwcHg7CiAgICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHNjYWxlKDApOwogICAgICAgICAgICB3aWR0aDogNTBweDsKICAgICAgICAgICAgaGVpZ2h0OiA1MHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zdHJpbmctY29sb3IpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIG9wYWNpdHk6IDA7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjFzIGVhc2Utb3V0OwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMzBweCB2YXIoLS1zdHJpbmctY29sb3IpOwogICAgICAgIH0KCiAgICAgICAgLnN0cmluZy1pbmRpY2F0b3IuYWN0aXZlIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHNjYWxlKDEuNSk7CiAgICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgfQoKICAgICAgICAvKiBOb3RlIGZhbGxpbmcgZG93biB0aGUgc3RyaW5nICovCiAgICAgICAgLm5vdGUgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogLTUwcHg7CiAgICAgICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwogICAgICAgICAgICB3aWR0aDogNDVweDsKICAgICAgICAgICAgaGVpZ2h0OiA0NXB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zdHJpbmctY29sb3IpOwogICAgICAgICAgICBib3JkZXI6IDNweCBzb2xpZCB3aGl0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMjBweCB2YXIoLS1zdHJpbmctY29sb3IpOwogICAgICAgICAgICBhbmltYXRpb246IG5vdGVGYWxsIDJzIGxpbmVhcjsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIG5vdGVGYWxsIHsKICAgICAgICAgICAgMCUgewogICAgICAgICAgICAgICAgdG9wOiAtNTBweDsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgMTAwJSB7CiAgICAgICAgICAgICAgICB0b3A6IGNhbGMoMTAwJSAtIDUwcHgpOwogICAgICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLyogQnVyc3QgZWZmZWN0IHdoZW4gbm90ZSBoaXRzICovCiAgICAgICAgLmJ1cnN0LXBhcnRpY2xlIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB3aWR0aDogOHB4OwogICAgICAgICAgICBoZWlnaHQ6IDhweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tc3RyaW5nLWNvbG9yKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICAgICAgYW5pbWF0aW9uOiBidXJzdEZseSAwLjZzIGVhc2Utb3V0IGZvcndhcmRzOwogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBidXJzdEZseSB7CiAgICAgICAgICAgIDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpOwogICAgICAgICAgICAgICAgb3BhY2l0eTogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICAxMDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKHZhcigtLWJ1cnN0LXgpLCB2YXIoLS1idXJzdC15KSkgc2NhbGUoMCk7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiBTdHJpbmcgbGFiZWwgYXQgdG9wICovCiAgICAgICAgLnN0cmluZy1sYWJlbCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiAxMHB4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1zdHJpbmctY29sb3IpOwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDVweCB2YXIoLS1zdHJpbmctY29sb3IpOwogICAgICAgICAgICBvcGFjaXR5OiAwLjc7CiAgICAgICAgICAgIHotaW5kZXg6IDEwOwogICAgICAgIH0KCiAgICAgICAgLyogU3RhcnQgb3ZlcmxheSAqLwogICAgICAgIC5zdGFydC1vdmVybGF5IHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC45NSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXM7CiAgICAgICAgfQoKICAgICAgICAuc3RhcnQtb3ZlcmxheS5oaWRkZW4gewogICAgICAgICAgICBvcGFjaXR5OiAwOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICB9CgogICAgICAgIC5zdGFydC1idG4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgcGFkZGluZzogMjBweCA1MHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MHB4OwogICAgICAgICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjQpOwogICAgICAgIH0KCiAgICAgICAgLnN0YXJ0LWluZm8gewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpOwogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgcGFkZGluZzogMCAzMHB4OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICAgIH0KCiAgICAgICAgLyogU2NvcmUgY291bnRlciAqLwogICAgICAgIC5jb3VudGVyIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IG1heCgzMHB4LCBlbnYoc2FmZS1hcmVhLWluc2V0LXRvcCwgMjBweCkpOwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgZm9udC1zaXplOiA0OHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogMzAwOwogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpOwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDIwcHggcmdiYSgxMDIsIDEyNiwgMjM0LCAwLjgpOwogICAgICAgICAgICB6LWluZGV4OiAxMDA7CiAgICAgICAgfQoKICAgICAgICAvKiBJbmZvIHRleHQgKi8KICAgICAgICAuaW5mby10ZXh0IHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IG1heCg5MHB4LCBjYWxjKGVudihzYWZlLWFyZWEtaW5zZXQtdG9wLCAyMHB4KSArIDYwcHgpKTsKICAgICAgICAgICAgbGVmdDogNTAlOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICB6LWluZGV4OiAxMDA7CiAgICAgICAgfQoKICAgICAgICAvKiBTZW5zaXRpdml0eSBjb250cm9sICovCiAgICAgICAgLmNvbnRyb2xzIHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICBib3R0b206IG1heCgyMHB4LCBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSwgMjBweCkpOwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZ2FwOiAxNXB4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICB6LWluZGV4OiAxMDA7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTsKICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyNXB4OwogICAgICAgIH0KCiAgICAgICAgLnNlbnNpdGl2aXR5LWxhYmVsIHsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIH0KCiAgICAgICAgLnNlbnNpdGl2aXR5LXNsaWRlciB7CiAgICAgICAgICAgIHdpZHRoOiAxMDBweDsKICAgICAgICAgICAgaGVpZ2h0OiA0cHg7CiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7CiAgICAgICAgfQoKICAgICAgICAuc2Vuc2l0aXZpdHktc2xpZGVyOjotd2Via2l0LXNsaWRlci10aHVtYiB7CiAgICAgICAgICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsKICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgIGhlaWdodDogMTZweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNjY3ZWVhOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQoKICAgICAgICAvKiBDb21ibyBpbmRpY2F0b3IgKi8KICAgICAgICAuY29tYm8gewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogNTAlOwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogICAgICAgICAgICBmb250LXNpemU6IDcycHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgICAgICAgIGNvbG9yOiAjZmZkNzAwOwogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDMwcHggI2ZmZDcwMDsKICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICAgICAgICAgIHotaW5kZXg6IDIwMDsKICAgICAgICB9CgogICAgICAgIC5jb21iby5zaG93IHsKICAgICAgICAgICAgYW5pbWF0aW9uOiBjb21ib1Nob3cgMC41cyBlYXNlLW91dDsKICAgICAgICB9CgogICAgICAgIEBrZXlmcmFtZXMgY29tYm9TaG93IHsKICAgICAgICAgICAgMCUgewogICAgICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKDAuNSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgNTAlIHsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKSBzY2FsZSgxLjIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIDEwMCUgewogICAgICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9InN0YXJ0LW92ZXJsYXkiIGlkPSJzdGFydE92ZXJsYXkiPgogICAgICAgIDxidXR0b24gY2xhc3M9InN0YXJ0LWJ0biIgaWQ9InN0YXJ0QnRuIj7wn464IFJvenBvY3puaWo8L2J1dHRvbj4KICAgICAgICA8cCBjbGFzcz0ic3RhcnQtaW5mbyI+V3lkYXdhaiBkxbp3acSZa2kgLSB3eXNva2llIGFrdHl3dWrEhSBnw7NybmUgc3RydW55LDxicj5uaXNraWUgLSBkb2xuZSBzdHJ1bnkhPC9wPgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzdHJpbmdzLWNvbnRhaW5lciIgaWQ9InN0cmluZ3NDb250YWluZXIiPjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iY291bnRlciIgaWQ9ImNvdW50ZXIiPjA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImluZm8tdGV4dCI+V3lkYWogZMW6d2nEmWshIPCfjqQ8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImNvbWJvIiBpZD0iY29tYm8iPjwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzIj4KICAgICAgICA8c3BhbiBjbGFzcz0ic2Vuc2l0aXZpdHktbGFiZWwiPkN6dcWCb8WbxIc8L3NwYW4+CiAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBjbGFzcz0ic2Vuc2l0aXZpdHktc2xpZGVyIiBpZD0ic2Vuc2l0aXZpdHkiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IjUiPgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBjb25zdCBBdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7CiAgICAgICAgbGV0IGF1ZGlvQ3R4ID0gbnVsbDsKICAgICAgICBsZXQgYW5hbHlzZXIgPSBudWxsOwogICAgICAgIGxldCBtaWNyb3Bob25lID0gbnVsbDsKICAgICAgICBsZXQgaXNMaXN0ZW5pbmcgPSBmYWxzZTsKCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpOwogICAgICAgIGNvbnN0IHN0cmluZ3NDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RyaW5nc0NvbnRhaW5lcicpOwogICAgICAgIGNvbnN0IHN0YXJ0T3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydE92ZXJsYXknKTsKICAgICAgICBjb25zdCBzdGFydEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ0bicpOwogICAgICAgIGNvbnN0IHNlbnNpdGl2aXR5U2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbnNpdGl2aXR5Jyk7CiAgICAgICAgY29uc3QgY291bnRlckVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdW50ZXInKTsKICAgICAgICBjb25zdCBjb21ib0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbWJvJyk7CgogICAgICAgIGxldCBzY29yZSA9IDA7CiAgICAgICAgbGV0IGNvbWJvID0gMDsKICAgICAgICBsZXQgc2Vuc2l0aXZpdHkgPSA1OwoKICAgICAgICAvLyA2IHN0cmluZ3Mgd2l0aCBmcmVxdWVuY3kgcmFuZ2VzCiAgICAgICAgY29uc3Qgc3RyaW5ncyA9IFsKICAgICAgICAgICAgeyBuYW1lOiAnRScsIGNvbG9yOiAnI2ZmMDg0NCcsIGZyZXFNaW46IDcwMCwgZnJlcU1heDogMjAwMCB9LCAgIC8vIFJlZCAtIGhpZ2hlc3QKICAgICAgICAgICAgeyBuYW1lOiAnQScsIGNvbG9yOiAnI2ZmOGMwMCcsIGZyZXFNaW46IDQ1MCwgZnJlcU1heDogNzAwIH0sICAgIC8vIE9yYW5nZQogICAgICAgICAgICB7IG5hbWU6ICdEJywgY29sb3I6ICcjZmZkNzAwJywgZnJlcU1pbjogMjgwLCBmcmVxTWF4OiA0NTAgfSwgICAgLy8gWWVsbG93CiAgICAgICAgICAgIHsgbmFtZTogJ0cnLCBjb2xvcjogJyMwMGZmNDEnLCBmcmVxTWluOiAxODAsIGZyZXFNYXg6IDI4MCB9LCAgICAvLyBHcmVlbgogICAgICAgICAgICB7IG5hbWU6ICdCJywgY29sb3I6ICcjMDBiZmZmJywgZnJlcU1pbjogMTEwLCBmcmVxTWF4OiAxODAgfSwgICAgLy8gQmx1ZQogICAgICAgICAgICB7IG5hbWU6ICdlJywgY29sb3I6ICcjOWQwMGZmJywgZnJlcU1pbjogNTAsIGZyZXFNYXg6IDExMCB9ICAgICAgLy8gUHVycGxlIC0gbG93ZXN0CiAgICAgICAgXTsKCiAgICAgICAgY29uc3Qgc3RyaW5nRWxlbWVudHMgPSBbXTsKCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU3RyaW5ncygpIHsKICAgICAgICAgICAgc3RyaW5ncy5mb3JFYWNoKChzdHJpbmcsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgdHJhY2suY2xhc3NOYW1lID0gJ3N0cmluZy10cmFjayc7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGxpbmUuY2xhc3NOYW1lID0gJ3N0cmluZy1saW5lJzsKICAgICAgICAgICAgICAgIGxpbmUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RyaW5nLWNvbG9yJywgc3RyaW5nLmNvbG9yKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGxhYmVsLmNsYXNzTmFtZSA9ICdzdHJpbmctbGFiZWwnOwogICAgICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBzdHJpbmcubmFtZTsKICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLnNldFByb3BlcnR5KCctLXN0cmluZy1jb2xvcicsIHN0cmluZy5jb2xvcik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IGhpdFpvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGhpdFpvbmUuY2xhc3NOYW1lID0gJ2hpdC16b25lJzsKICAgICAgICAgICAgICAgIGhpdFpvbmUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RyaW5nLWNvbG9yJywgc3RyaW5nLmNvbG9yKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3N0cmluZy1pbmRpY2F0b3InOwogICAgICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnNldFByb3BlcnR5KCctLXN0cmluZy1jb2xvcicsIHN0cmluZy5jb2xvcik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRyYWNrLmFwcGVuZENoaWxkKGxpbmUpOwogICAgICAgICAgICAgICAgdHJhY2suYXBwZW5kQ2hpbGQobGFiZWwpOwogICAgICAgICAgICAgICAgdHJhY2suYXBwZW5kQ2hpbGQoaGl0Wm9uZSk7CiAgICAgICAgICAgICAgICB0cmFjay5hcHBlbmRDaGlsZChpbmRpY2F0b3IpOwogICAgICAgICAgICAgICAgc3RyaW5nc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmFjayk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHN0cmluZ0VsZW1lbnRzLnB1c2goewogICAgICAgICAgICAgICAgICAgIHRyYWNrOiB0cmFjaywKICAgICAgICAgICAgICAgICAgICBpbmRpY2F0b3I6IGluZGljYXRvciwKICAgICAgICAgICAgICAgICAgICBjb25maWc6IHN0cmluZwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTm90ZShzdHJpbmdJbmRleCkgewogICAgICAgICAgICBjb25zdCB0cmFjayA9IHN0cmluZ0VsZW1lbnRzW3N0cmluZ0luZGV4XS50cmFjazsKICAgICAgICAgICAgY29uc3QgY29sb3IgPSBzdHJpbmdzW3N0cmluZ0luZGV4XS5jb2xvcjsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IG5vdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbm90ZS5jbGFzc05hbWUgPSAnbm90ZSc7CiAgICAgICAgICAgIG5vdGUuc3R5bGUuc2V0UHJvcGVydHkoJy0tc3RyaW5nLWNvbG9yJywgY29sb3IpOwogICAgICAgICAgICAKICAgICAgICAgICAgdHJhY2suYXBwZW5kQ2hpbGQobm90ZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGUucmVtb3ZlKCksIDIwMDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQnVyc3Qoc3RyaW5nSW5kZXgpIHsKICAgICAgICAgICAgY29uc3QgdHJhY2sgPSBzdHJpbmdFbGVtZW50c1tzdHJpbmdJbmRleF0udHJhY2s7CiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0cmFjay5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgY29uc3QgY29sb3IgPSBzdHJpbmdzW3N0cmluZ0luZGV4XS5jb2xvcjsKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGFydGljbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLmNsYXNzTmFtZSA9ICdidXJzdC1wYXJ0aWNsZSc7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdHJpbmctY29sb3InLCBjb2xvcik7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5sZWZ0ID0gJzUwJSc7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5ib3R0b20gPSAnNjBweCc7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gKE1hdGguUEkgKiAyICogaSkgLyAxMjsKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gMzAgKyBNYXRoLnJhbmRvbSgpICogMzA7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1idXJzdC14JywgYCR7TWF0aC5jb3MoYW5nbGUpICogZGlzdGFuY2V9cHhgKTsKICAgICAgICAgICAgICAgIHBhcnRpY2xlLnN0eWxlLnNldFByb3BlcnR5KCctLWJ1cnN0LXknLCBgJHtNYXRoLnNpbihhbmdsZSkgKiBkaXN0YW5jZX1weGApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0cmFjay5hcHBlbmRDaGlsZChwYXJ0aWNsZSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBhcnRpY2xlLnJlbW92ZSgpLCA2MDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwbGF5R3VpdGFyU291bmQoc3RyaW5nSW5kZXgpIHsKICAgICAgICAgICAgaWYgKCFhdWRpb0N0eCkgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgY29uZmlnID0gc3RyaW5nc1tzdHJpbmdJbmRleF07CiAgICAgICAgICAgIGNvbnN0IGJhc2VGcmVxID0gKGNvbmZpZy5mcmVxTWluICsgY29uZmlnLmZyZXFNYXgpIC8gMjsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IG9zYyA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgY29uc3QgZ2FpbiA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG9zYy50eXBlID0gJ3RyaWFuZ2xlJzsKICAgICAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZShiYXNlRnJlcSwgYXVkaW9DdHguY3VycmVudFRpbWUpOwogICAgICAgICAgICAKICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIGF1ZGlvQ3R4LmN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuMywgYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjAxKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjUpOwogICAgICAgICAgICAKICAgICAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgICAgIGdhaW4uY29ubmVjdChhdWRpb0N0eC5kZXN0aW5hdGlvbik7CiAgICAgICAgICAgIAogICAgICAgICAgICBvc2Muc3RhcnQoKTsKICAgICAgICAgICAgb3NjLnN0b3AoYXVkaW9DdHguY3VycmVudFRpbWUgKyAwLjUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2hvd0NvbWJvKCkgewogICAgICAgICAgICBpZiAoY29tYm8gPiAwICYmIGNvbWJvICUgNSA9PT0gMCkgewogICAgICAgICAgICAgICAgY29tYm9FbC50ZXh0Q29udGVudCA9IGAke2NvbWJvfXggQ09NQk8hYDsKICAgICAgICAgICAgICAgIGNvbWJvRWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgICAgICAgICAgdm9pZCBjb21ib0VsLm9mZnNldFdpZHRoOwogICAgICAgICAgICAgICAgY29tYm9FbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRyaWdnZXJTdHJpbmcoc3RyaW5nSW5kZXgpIHsKICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHN0cmluZ0VsZW1lbnRzW3N0cmluZ0luZGV4XTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFZpc3VhbCBmZWVkYmFjawogICAgICAgICAgICBlbGVtZW50LmluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBlbGVtZW50LmluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENyZWF0ZSBub3RlIGFuZCBidXJzdAogICAgICAgICAgICBjcmVhdGVOb3RlKHN0cmluZ0luZGV4KTsKICAgICAgICAgICAgY3JlYXRlQnVyc3Qoc3RyaW5nSW5kZXgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUGxheSBzb3VuZAogICAgICAgICAgICBwbGF5R3VpdGFyU291bmQoc3RyaW5nSW5kZXgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVXBkYXRlIHNjb3JlCiAgICAgICAgICAgIHNjb3JlKys7CiAgICAgICAgICAgIGNvbWJvKys7CiAgICAgICAgICAgIGNvdW50ZXJFbC50ZXh0Q29udGVudCA9IHNjb3JlOwogICAgICAgICAgICBzaG93Q29tYm8oKTsKICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHN0YXJ0TGlzdGVuaW5nKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYXVkaW9DdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgCiAgICAgICAgICAgICAgICAgICAgYXVkaW86IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGVjaG9DYW5jZWxsYXRpb246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBub2lzZVN1cHByZXNzaW9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0dhaW5Db250cm9sOiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBtaWNyb3Bob25lID0gYXVkaW9DdHguY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTsKICAgICAgICAgICAgICAgIGFuYWx5c2VyID0gYXVkaW9DdHguY3JlYXRlQW5hbHlzZXIoKTsKICAgICAgICAgICAgICAgIGFuYWx5c2VyLmZmdFNpemUgPSAyMDQ4OwogICAgICAgICAgICAgICAgYW5hbHlzZXIuc21vb3RoaW5nVGltZUNvbnN0YW50ID0gMC4zOwoKICAgICAgICAgICAgICAgIG1pY3JvcGhvbmUuY29ubmVjdChhbmFseXNlcik7CgogICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgc3RhcnRPdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwoKICAgICAgICAgICAgICAgIGRldGVjdFNvdW5kKCk7CgogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdOaWUgbW/FvG5hIHV6eXNrYcSHIGRvc3TEmXB1IGRvIG1pa3JvZm9udS4nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbGV0IGxhc3RUcmlnZ2VyID0ge307CiAgICAgICAgc3RyaW5ncy5mb3JFYWNoKChfLCBpKSA9PiBsYXN0VHJpZ2dlcltpXSA9IDApOwogICAgICAgIGxldCBsYXN0QWN0aXZpdHkgPSAwOwoKICAgICAgICBmdW5jdGlvbiBkZXRlY3RTb3VuZCgpIHsKICAgICAgICAgICAgaWYgKCFpc0xpc3RlbmluZykgcmV0dXJuOwoKICAgICAgICAgICAgY29uc3QgYnVmZmVyTGVuZ3RoID0gYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQ7CiAgICAgICAgICAgIGNvbnN0IGRhdGFBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlckxlbmd0aCk7CiAgICAgICAgICAgIGFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKGRhdGFBcnJheSk7CgogICAgICAgICAgICBjb25zdCBueXF1aXN0ID0gYXVkaW9DdHguc2FtcGxlUmF0ZSAvIDI7CiAgICAgICAgICAgIGNvbnN0IGZyZXFSZXNvbHV0aW9uID0gbnlxdWlzdCAvIGJ1ZmZlckxlbmd0aDsKICAgICAgICAgICAgY29uc3QgYmFzZVRocmVzaG9sZCA9IDUwIC0gKHNlbnNpdGl2aXR5ICogNCk7CiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CgogICAgICAgICAgICBsZXQgYW55QWN0aXZpdHkgPSBmYWxzZTsKCiAgICAgICAgICAgIHN0cmluZ0VsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBlbGVtZW50LmNvbmZpZzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgbWluQmluID0gTWF0aC5mbG9vcihjb25maWcuZnJlcU1pbiAvIGZyZXFSZXNvbHV0aW9uKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1heEJpbiA9IE1hdGguY2VpbChjb25maWcuZnJlcU1heCAvIGZyZXFSZXNvbHV0aW9uKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHN1bSA9IDA7CiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IG1pbkJpbjsgaSA8PSBtYXhCaW4gJiYgaSA8IGJ1ZmZlckxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgc3VtICs9IGRhdGFBcnJheVtpXTsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgYXZlcmFnZSA9IGNvdW50ID4gMCA/IHN1bSAvIGNvdW50IDogMDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKGF2ZXJhZ2UgPiBiYXNlVGhyZXNob2xkICYmIG5vdyAtIGxhc3RUcmlnZ2VyW2luZGV4XSA+IDI1MCkgewogICAgICAgICAgICAgICAgICAgIHRyaWdnZXJTdHJpbmcoaW5kZXgpOwogICAgICAgICAgICAgICAgICAgIGxhc3RUcmlnZ2VyW2luZGV4XSA9IG5vdzsKICAgICAgICAgICAgICAgICAgICBhbnlBY3Rpdml0eSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gUmVzZXQgY29tYm8gaWYgbm8gYWN0aXZpdHkgZm9yIDIgc2Vjb25kcwogICAgICAgICAgICBpZiAoYW55QWN0aXZpdHkpIHsKICAgICAgICAgICAgICAgIGxhc3RBY3Rpdml0eSA9IG5vdzsKICAgICAgICAgICAgfSBlbHNlIGlmIChub3cgLSBsYXN0QWN0aXZpdHkgPiAyMDAwKSB7CiAgICAgICAgICAgICAgICBjb21ibyA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkZXRlY3RTb3VuZCk7CiAgICAgICAgfQoKICAgICAgICBzdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0TGlzdGVuaW5nKTsKICAgICAgICBzZW5zaXRpdml0eVNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7CiAgICAgICAgICAgIHNlbnNpdGl2aXR5ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpOwogICAgICAgIH0pOwoKICAgICAgICBjcmVhdGVTdHJpbmdzKCk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==",
            swiatla: "PCFET0NUWVBFIGh0bWw+CjxodG1sPjxoZWFkPjxtZXRhIGNoYXJzZXQ9IlVURi04Ij48bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MS4wIj4KPHN0eWxlPip7bWFyZ2luOjA7cGFkZGluZzowO2JveC1zaXppbmc6Ym9yZGVyLWJveH1ib2R5e2JhY2tncm91bmQ6IzAwMDtoZWlnaHQ6MTAwdmg7b3ZlcmZsb3c6aGlkZGVuO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0ubGlnaHR7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6ODBweDtoZWlnaHQ6ODBweDtib3JkZXItcmFkaXVzOjUwJTthbmltYXRpb246cHVsc2UgMnMgZWFzZS1pbi1vdXQgaW5maW5pdGU7Ym94LXNoYWRvdzowIDAgNDBweCBjdXJyZW50Q29sb3J9QGtleWZyYW1lcyBwdWxzZXswJSwxMDAle3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5Oi40fTUwJXt0cmFuc2Zvcm06c2NhbGUoMS41KTtvcGFjaXR5OjF9fTwvc3R5bGU+CjwvaGVhZD48Ym9keT48c2NyaXB0PmNvbnN0IGNvbG9ycz1bJyNmZjZiNmInLCcjNGVjZGM0JywnI2ZmZTY2ZCcsJyM5NWUxZDMnLCcjZGRhMGRkJywnI2Y4YjUwMCddO2Z1bmN0aW9uIGNyZWF0ZUxpZ2h0KCl7Y29uc3QgbGlnaHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7bGlnaHQuY2xhc3NOYW1lPSdsaWdodCc7bGlnaHQuc3R5bGUuYmFja2dyb3VuZD1jb2xvcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmNvbG9ycy5sZW5ndGgpXTtsaWdodC5zdHlsZS5jb2xvcj1saWdodC5zdHlsZS5iYWNrZ3JvdW5kO2xpZ2h0LnN0eWxlLmxlZnQ9TWF0aC5yYW5kb20oKSood2luZG93LmlubmVyV2lkdGgtODApKydweCc7bGlnaHQuc3R5bGUudG9wPU1hdGgucmFuZG9tKCkqKHdpbmRvdy5pbm5lckhlaWdodC04MCkrJ3B4JztsaWdodC5zdHlsZS5hbmltYXRpb25EZWxheT1NYXRoLnJhbmRvbSgpKjIrJ3MnO2xpZ2h0LnN0eWxlLmFuaW1hdGlvbkR1cmF0aW9uPSgxLjUrTWF0aC5yYW5kb20oKSkrJ3MnO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGlnaHQpO3NldFRpbWVvdXQoKCk9PntsaWdodC5yZW1vdmUoKTtjcmVhdGVMaWdodCgpfSwzMDAwK01hdGgucmFuZG9tKCkqMjAwMCl9Zm9yKGxldCBpPTA7aTw4O2krKylzZXRUaW1lb3V0KCgpPT5jcmVhdGVMaWdodCgpLGkqNDAwKTwvc2NyaXB0PjwvYm9keT48L2h0bWw+"
        };
        
        function loadGame(gameName) {
            const gameContainer = document.getElementById('gameContainer');
            const gameFrame = document.getElementById('gameFrame');
            const menu = document.getElementById('menu');
            const backBtn = document.getElementById('backBtn');
            
            // Decode base64 and load into iframe
            const decoded = atob(GAMES_BASE64[gameName]);
            gameFrame.srcdoc = decoded;
            
            // Show game, hide menu
            gameContainer.classList.add('active');
            menu.classList.add('hidden');
            backBtn.classList.add('active');
        }
        
        function showMenu() {
            const gameContainer = document.getElementById('gameContainer');
            const gameFrame = document.getElementById('gameFrame');
            const menu = document.getElementById('menu');
            const backBtn = document.getElementById('backBtn');
            
            // Clear game
            gameFrame.srcdoc = '';
            
            // Show menu, hide game
            gameContainer.classList.remove('active');
            menu.classList.remove('hidden');
            backBtn.classList.remove('active');
        }
    </script>
</body>
</html>

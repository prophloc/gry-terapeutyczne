<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="theme-color" content="#6b2ddf" />
  <meta name="description" content="Interaktywne gry edukacyjne dla dzieci ze zwierzÄ…tkami - Memory, Kolorowanki, Rysowanie wzrokiem" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" href="icon-192.png" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
  
  <title>Gry Edukacyjne - ZwierzÄ™ta</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <!-- NAME SELECTION -->
  <div class="nameSelectScreen" id="nameSelectScreen">
    <h1 class="nameSelectTitle">ğŸ‘‹ CzeÅ›Ä‡!</h1>
    <p class="nameSelectSubtitle">Kto dzisiaj bÄ™dzie siÄ™ bawiÄ‡?</p>
    <div class="nameCards">
      <div class="nameCard leon" data-name="Leon" data-emoji="ğŸ‘¦">
        <div class="nameCardEmoji">ğŸ‘¦</div>
        <div class="nameCardName">Leon</div>
      </div>
      <div class="nameCard marcelina" data-name="Marcelina" data-emoji="ğŸ‘§">
        <div class="nameCardEmoji">ğŸ‘§</div>
        <div class="nameCardName">Marcelina</div>
      </div>
    </div>
  </div>

  <!-- GLOBAL FLOATING FACE (lives above everything) -->
  <div class="speakingFaceOverlay faceMini" id="speakingFaceOverlay" style="opacity:0;">
    <div class="faceSprite"><div class="faceBob">
    <svg class="faceChar" viewBox="-10 0 220 240" xmlns="http://www.w3.org/2000/svg">
      <g class="face-hand-left">
        <ellipse cx="8" cy="155" rx="13" ry="11" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.8"/>
        <ellipse cx="1" cy="143" rx="4" ry="6" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(-15,1,143)"/>
        <ellipse cx="8" cy="139" rx="3.5" ry="6.5" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(-5,8,139)"/>
        <ellipse cx="15" cy="140" rx="3.5" ry="6" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(5,15,140)"/>
        <ellipse cx="21" cy="144" rx="3" ry="5" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(15,21,144)"/>
      </g>
      <g class="face-hand-right">
        <ellipse cx="192" cy="155" rx="13" ry="11" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.8"/>
        <ellipse cx="179" cy="144" rx="3" ry="5" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(-15,179,144)"/>
        <ellipse cx="185" cy="140" rx="3.5" ry="6" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(-5,185,140)"/>
        <ellipse cx="192" cy="139" rx="3.5" ry="6.5" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(5,192,139)"/>
        <ellipse cx="199" cy="143" rx="4" ry="6" fill="#FFD9A0" stroke="#C98B4A" stroke-width="1.2" transform="rotate(15,199,143)"/>
      </g>
      <ellipse cx="100" cy="95" rx="78" ry="82" fill="#FFD9A0" stroke="#C98B4A" stroke-width="3"/>
      <path d="M22 90 Q22 28 100 18 Q178 28 178 90" fill="#7B5CFF" stroke="#5A3FCC" stroke-width="2.5"/>
      <circle cx="100" cy="18" r="10" fill="#FF6B8A"/>
      <ellipse cx="24" cy="100" rx="12" ry="16" fill="#FFCB8E" stroke="#C98B4A" stroke-width="2"/>
      <ellipse cx="176" cy="100" rx="12" ry="16" fill="#FFCB8E" stroke="#C98B4A" stroke-width="2"/>
      <g class="face-eye face-eye-left">
        <ellipse cx="68" cy="95" rx="14" ry="15" fill="white" stroke="#555" stroke-width="1.5"/>
        <circle cx="70" cy="96" r="8" fill="#2D1B69"/>
        <circle cx="73" cy="92" r="3" fill="white"/>
      </g>
      <g class="face-eye face-eye-right">
        <ellipse cx="132" cy="95" rx="14" ry="15" fill="white" stroke="#555" stroke-width="1.5"/>
        <circle cx="130" cy="96" r="8" fill="#2D1B69"/>
        <circle cx="133" cy="92" r="3" fill="white"/>
      </g>
      <path d="M52 76 Q68 68 82 76" fill="none" stroke="#5A3FCC" stroke-width="3" stroke-linecap="round"/>
      <path d="M118 76 Q132 68 148 76" fill="none" stroke="#5A3FCC" stroke-width="3" stroke-linecap="round"/>
      <ellipse cx="100" cy="115" rx="6" ry="4" fill="#E8A87C"/>
      <ellipse class="face-blush" cx="55" cy="118" rx="14" ry="8" fill="#FF9EAE"/>
      <ellipse class="face-blush" cx="145" cy="118" rx="14" ry="8" fill="#FF9EAE"/>
      <g id="faceMouthGroup">
        <path id="faceMouthClosed" d="M78 132 Q100 148 122 132" fill="none" stroke="#C0604A" stroke-width="3" stroke-linecap="round"/>
        <ellipse id="faceMouthOpen" cx="100" cy="136" rx="18" ry="4" fill="#C0604A" opacity="0">
          <animate attributeName="rx" values="18;20;18" dur="0.15s" repeatCount="indefinite"/>
        </ellipse>
        <rect id="faceMouthTeeth" x="88" y="130" width="24" height="6" rx="3" fill="white" opacity="0"/>
        <ellipse id="faceMouthTongue" cx="100" cy="142" rx="10" ry="5" fill="#FF7088" opacity="0"/>
      </g>
    </svg>
    </div></div>
    <div class="speakBubble" id="speakBubble"><span class="speakText" id="speakBubbleText"></span></div>
  </div>
  <!-- Webcam toggle -->
  <button class="webcamToggle" id="webcamToggle" title="WÅ‚Ä…cz Å›ledzenie wzroku (kamera)">ğŸ‘ï¸</button>
  <video id="webcamVideo" autoplay playsinline style="display:none;position:fixed;width:1px;height:1px;opacity:0;pointer-events:none;"></video>

  <!-- TOP BAR -->
  <div class="topBar">
    <div class="playerBadge" id="playerBadge" title="ZmieÅ„ gracza">
      <span class="emoji" id="playerEmoji">ğŸ‘¦</span>
      <span class="name" id="playerNameDisplay">Leon</span>
    </div>
    <div class="tabBar">
      <button class="tabBtn active" data-tab="gitara"><span class="tabIcon">ğŸ¸</span> Gitara</button>
      <button class="tabBtn" data-tab="liczenie"><span class="tabIcon">ğŸ”¢</span> Liczby</button>
      <button class="tabBtn" data-tab="alfabet"><span class="tabIcon">ğŸ”¤</span> Alfabet</button>
      <button class="tabBtn" data-tab="zwierzeta"><span class="tabIcon">ğŸ¾</span> ZwierzÄ™ta</button>
      <button class="tabBtn" data-tab="kolorowanki"><span class="tabIcon">ğŸ¨</span> Kolorowanki</button>
      <button class="tabBtn" data-tab="pamiec"><span class="tabIcon">ğŸ§ </span> PamiÄ™Ä‡</button>
    </div>
  </div>

  <!-- PAGE: GITARA -->
  <div class="page active" id="pageGitara">
    <div class="vh">
      <div class="hud">
        <div class="pill"><div class="small">GÅ‚oÅ›noÅ›Ä‡</div><div class="meter"><div class="meterFill" id="meterFill"></div></div></div>
        <div class="pill"><div class="pitchText" id="pitchReadout">â€”</div></div>
      </div>
      <div class="arenaWrap">
        <div class="arena" id="arena"><div class="lanes" id="lanes"></div></div>
      </div>
      <div class="controls">
        <div class="ctrlGroup"><label>Tempo</label><input type="range" min="1" max="10" value="5" id="speedSlider"></div>
        <div class="ctrlGroup"><label>CzuÅ‚oÅ›Ä‡</label><input type="range" min="1" max="10" value="5" id="sensSlider"></div>
      </div>
    </div>
    <div class="overlay" id="overlay">
      <h1>ğŸ¸ Gitara DÅºwiÄ™ku</h1>
      <p>Åšpiewaj lub graj, aby zobaczyÄ‡ dÅºwiÄ™ki na ekranie!</p>
      <button class="startBtn" id="startBtn">Rozpocznij</button>
    </div>
  </div>

  <!-- PAGE: LICZENIE -->
  <div class="page" id="pageLiczenie">
    <div class="gamePage liczenie">
      <h1 class="gameTitle">ğŸ”¢ Nauka Liczenia</h1>
      <p class="gameSubtitle">PosÅ‚uchaj i dotknij wÅ‚aÅ›ciwÄ… cyfrÄ™!</p>
      <div class="scoreDisplay">
        <div class="scorePill"><span class="icon">âœ…</span><span class="value" id="numCorrectCount">0</span></div>
        <div class="scorePill"><span class="icon">ğŸ¯</span><span class="value" id="numStreakCount">0</span></div>
      </div>
      <div class="timerBar"><div class="timerFill" id="numTimerFill"></div></div>
      <div class="canvasWrap"><canvas id="numCanvas" width="100" height="120"></canvas></div>
      <div class="itemsGrid numbers" id="numbersGrid"></div>
      <div class="gameControls">
        <button class="gameBtn primary" id="numStartBtn">â–¶ï¸ Start</button>
        <button class="gameBtn" id="numRepeatBtn">ğŸ”Š PowtÃ³rz</button>
      </div>
    </div>
    <div class="celebrationOverlay" id="numCelebration">
      <div class="celebrationEmoji">ğŸ‰</div>
      <div class="celebrationText" id="numCelebrationText">Åšwietnie!</div>
    </div>
  </div>

  <!-- PAGE: ALFABET -->
  <div class="page" id="pageAlfabet">
    <div class="gamePage alfabet">
      <h1 class="gameTitle alfabet">ğŸ”¤ Nauka Alfabetu</h1>
      <p class="gameSubtitle">PosÅ‚uchaj i dotknij wÅ‚aÅ›ciwÄ… literÄ™!</p>
      <div class="scoreDisplay">
        <div class="scorePill"><span class="icon">âœ…</span><span class="value" id="alphaCorrectCount">0</span></div>
        <div class="scorePill"><span class="icon">ğŸ¯</span><span class="value" id="alphaStreakCount">0</span></div>
      </div>
      <div class="timerBar"><div class="timerFill" id="alphaTimerFill"></div></div>
      <div class="canvasWrap"><canvas id="alphaCanvas" width="100" height="120"></canvas></div>
      <div class="itemsGrid letters" id="lettersGrid"></div>
      <div class="gameControls">
        <button class="gameBtn primary alfabet" id="alphaStartBtn">â–¶ï¸ Start</button>
        <button class="gameBtn" id="alphaRepeatBtn">ğŸ”Š PowtÃ³rz</button>
      </div>
    </div>
    <div class="celebrationOverlay" id="alphaCelebration">
      <div class="celebrationEmoji">ğŸ‰</div>
      <div class="celebrationText" id="alphaCelebrationText">Åšwietnie!</div>
    </div>
  </div>

  <!-- PAGE: ZWIERZÄ˜TA -->
  <div class="page" id="pageZwierzeta">
    <div class="gamePage zwierzeta">
      <h1 class="gameTitle zwierzeta">ğŸ¾ Nauka ZwierzÄ…t</h1>
      <p class="gameSubtitle">PosÅ‚uchaj i dotknij wÅ‚aÅ›ciwe zwierzÄ™!</p>
      <div class="scoreDisplay">
        <div class="scorePill"><span class="icon">âœ…</span><span class="value" id="animalCorrectCount">0</span></div>
        <div class="scorePill"><span class="icon">ğŸ¯</span><span class="value" id="animalStreakCount">0</span></div>
      </div>
      <div class="timerBar"><div class="timerFill" id="animalTimerFill"></div></div>
      <div class="canvasWrap animalCanvas">
        <canvas id="animalCanvas" width="120" height="130"></canvas>
        <div class="svgStage" id="animalSvgStage" aria-hidden="true"></div>
      </div>
      <div class="itemsGrid animals" id="animalsGrid"></div>
      <div class="gameControls">
        <button class="gameBtn primary zwierzeta" id="animalStartBtn">â–¶ï¸ Start</button>
        <button class="gameBtn" id="animalRepeatBtn">ğŸ”Š PowtÃ³rz</button>
<button class="gameBtn" id="animalResetBtn" title="WrÃ³Ä‡ do wbudowanych zwierzÄ…t">ğŸ§¹ Reset</button>
</div>
    </div>
    <div class="celebrationOverlay" id="animalCelebration">
      <div class="celebrationEmoji">ğŸ‰</div>
      <div class="celebrationText" id="animalCelebrationText">Åšwietnie!</div>
    </div>
  </div>

  <!-- PAGE: KOLOROWANKI -->
  <div class="page" id="pageKolorowanki">
    <div class="coloringPage">
      
      <div class="coloring-animal-bar">
        <select id="animalSelect">
          <option value="pies">ğŸ¶ Pies</option>
          <option value="kot">ğŸ± Kot</option>
          <option value="krowa">ğŸ® Krowa</option>
          <option value="Å›winia">ğŸ· Åšwinia</option>
          <option value="kura">ğŸ” Kura</option>
          <option value="koÅ„">ğŸ´ KoÅ„</option>
          <option value="owca">ğŸ‘ Owca</option>
          <option value="pszczolka_maja">ğŸ PszczÃ³Å‚ka Maja</option>
          <option value="kaczka">ğŸ¦† Kaczka</option>
          <option value="krÃ³lik">ğŸ° KrÃ³lik</option>
          <option value="mysz">ğŸ­ Mysz</option>
          <option value="Å¼aba">ğŸ¸ Å»aba</option>
        </select>
      </div>
      
      <div class="coloring-canvas-frame">
        <canvas id="coloringCanvas" width="800" height="600"></canvas>
      </div>
      
      <div class="coloring-bottom-panel">
        <div class="coloring-panel-row coloring-tools-row">
          <button class="coloring-tool-btn active" id="konturBtn" title="PodpowiedÅº">
            <span class="coloring-tool-icon">ğŸ’¡</span>
            <span class="coloring-tool-label">PodpowiedÅº</span>
          </button>
          
          <button class="coloring-tool-btn" id="gazeDrawBtn" title="Rysuj wzrokiem (wymaga kamery)">
            <span class="coloring-tool-icon">ğŸ‘ï¸</span>
            <span class="coloring-tool-label">Wzrok</span>
          </button>
          
          <button class="coloring-tool-btn" id="gazeCalibrateBtn" title="Kalibruj wzrok" style="display:none;">
            <span class="coloring-tool-icon">ğŸ¯</span>
            <span class="coloring-tool-label">Kalibruj</span>
          </button>
          
          <div class="colorPalette" id="colorPalette">
            <button class="colorBall" data-color="#00e5ff" style="--ball-color:#00e5ff" title="Cyan"></button>
            <button class="colorBall" data-color="#ff3bff" style="--ball-color:#ff3bff" title="Magenta"></button>
            <button class="colorBall" data-color="#ffe03b" style="--ball-color:#ffe03b" title="ZÅ‚oty"></button>
            <button class="colorBall" data-color="#3bff6e" style="--ball-color:#3bff6e" title="Zielony"></button>
            <button class="colorBall" data-color="#ff3b7a" style="--ball-color:#ff3b7a" title="RÃ³Å¼owy"></button>
            <button class="colorBall" data-color="#b83bff" style="--ball-color:#b83bff" title="Fioletowy"></button>
          </div>
          
          <button class="coloring-tool-btn" id="wypelnijBtn" style="visibility:hidden;width:0;min-width:0;padding:0;border:0;">
          </button>
        </div>
        
        <div class="coloring-panel-row coloring-actions-row">
          <button class="coloring-action-btn" id="undoBtn" title="Cofnij">
            <span>â†©ï¸</span> Cofnij
          </button>
          <button class="coloring-action-btn" id="czyscBtn" title="PomiÅ„">
            <span>â­ï¸</span> PomiÅ„
          </button>
          <button class="coloring-action-btn coloring-done-btn" id="doneBtn" title="Gotowe">
            âœ¨ Gotowe!
          </button>
        </div>
      </div>
      
    </div>
  </div>

  <!-- PAGE: PAMIÄ˜Ä† (Memory Game) -->
  <div class="page" id="pagePamiec">
    <div class="memoryPage">
      
      <!-- Top panel with stats -->
      <div class="memory-top-panel">
        <div class="memory-stat">
          <span class="memory-stat-icon">ğŸ¯</span>
          <div class="memory-stat-text">
            <div class="memory-stat-label">Ruchy</div>
            <div class="memory-stat-value" id="memoryMoves">0</div>
          </div>
        </div>
        
        <div class="memory-stat">
          <span class="memory-stat-icon">â­</span>
          <div class="memory-stat-text">
            <div class="memory-stat-label">Pary</div>
            <div class="memory-stat-value" id="memoryPairs">0 / 6</div>
          </div>
        </div>
        
        <div class="memory-stat">
          <span class="memory-stat-icon">â±ï¸</span>
          <div class="memory-stat-text">
            <div class="memory-stat-label">Czas</div>
            <div class="memory-stat-value" id="memoryTime">0:00</div>
          </div>
        </div>
      </div>
      
      <!-- Animated character between stats and board -->
      <div class="memory-character-container">
        <div class="memory-bozek" id="memoryBozek">
          <svg viewBox="0 0 200 200" class="memory-bozek-svg">
            <!-- Head -->
            <circle cx="100" cy="80" r="50" fill="#ffd4a3" stroke="#d4a574" stroke-width="3"/>
            
            <!-- Hair tuft -->
            <path d="M 85 35 Q 90 25 95 35 Q 100 25 105 35 Q 110 25 115 35" 
                  fill="none" stroke="#8b6914" stroke-width="4" stroke-linecap="round"/>
            
            <!-- Eyes -->
            <g class="memory-bozek-eyes">
              <!-- Left eye white -->
              <ellipse cx="85" cy="75" rx="12" ry="15" fill="white" stroke="#333" stroke-width="2"/>
              <!-- Right eye white -->
              <ellipse cx="115" cy="75" rx="12" ry="15" fill="white" stroke="#333" stroke-width="2"/>
              
              <!-- Left pupil -->
              <circle class="memory-bozek-pupil-left" cx="85" cy="78" r="6" fill="#1a1a1a"/>
              <!-- Right pupil -->
              <circle class="memory-bozek-pupil-right" cx="115" cy="78" r="6" fill="#1a1a1a"/>
              
              <!-- Left highlight -->
              <circle cx="83" cy="75" r="3" fill="white" opacity="0.8"/>
              <!-- Right highlight -->
              <circle cx="113" cy="75" r="3" fill="white" opacity="0.8"/>
            </g>
            
            <!-- Nose -->
            <ellipse cx="100" cy="88" rx="4" ry="6" fill="#e6b88a"/>
            
            <!-- Mouth -->
            <path class="memory-bozek-mouth" 
                  d="M 88 98 Q 100 105 112 98" 
                  fill="none" stroke="#d4a574" stroke-width="3" stroke-linecap="round"/>
            
            <!-- Body (simple oval) -->
            <ellipse cx="100" cy="150" rx="35" ry="45" fill="#8b4dff" stroke="#6b2ddf" stroke-width="3"/>
            
            <!-- Arms -->
            <path d="M 70 135 Q 65 140 68 145" fill="none" stroke="#ffd4a3" stroke-width="8" stroke-linecap="round"/>
            <path d="M 130 135 Q 135 140 132 145" fill="none" stroke="#ffd4a3" stroke-width="8" stroke-linecap="round"/>
          </svg>
        </div>
      </div>
      
      <!-- Game board -->
      <div class="memory-board-container">
        <div class="memory-board" id="memoryBoard">
          <!-- Cards will be generated here by JavaScript -->
        </div>
      </div>
      
      <!-- Bottom panel with controls -->
      <div class="memory-bottom-panel">
        <button class="memory-btn memory-btn-new" id="memoryNewGame">
          <span class="memory-btn-icon">ğŸ”„</span>
          <span class="memory-btn-label">Nowa gra</span>
        </button>
        
        <div class="memory-difficulty">
          <button class="memory-diff-btn active" data-level="easy" title="Åatwy: 12 kart (6 par)">
            <span class="memory-diff-icon">ğŸ˜Š</span>
            <span class="memory-diff-label">Åatwy</span>
          </button>
          <button class="memory-diff-btn" data-level="medium" title="Åšredni: 16 kart (8 par)">
            <span class="memory-diff-icon">ğŸ¤”</span>
            <span class="memory-diff-label">Åšredni</span>
          </button>
          <button class="memory-diff-btn" data-level="hard" title="Trudny: 20 kart (10 par)">
            <span class="memory-diff-icon">ğŸ¤¯</span>
            <span class="memory-diff-label">Trudny</span>
          </button>
        </div>
      </div>
      
    </div>
  </div>

  <!-- JavaScript modules -->
  <script src="js/01-player-voice.js"></script>
  <script src="js/02-voice-wav.js"></script>
  <script src="js/03-tabs.js"></script>
  <script src="js/04-drawing.js"></script>
  <script src="js/05-learning-game.js"></script>
  <script src="js/06-games.js"></script>
  <script src="js/07-gitara.js"></script>
  <script src="js/08-kolorowanki.js"></script>
  <script src="js/09-memory.js"></script>

  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service Worker zarejestrowany:', reg))
          .catch(err => console.log('Service Worker bÅ‚Ä…d:', err));
      });
    }

    // PWA Install prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      // MoÅ¼esz tutaj pokazaÄ‡ wÅ‚asny przycisk instalacji
      console.log('Aplikacja moÅ¼e byÄ‡ zainstalowana!');
    });

    // ObsÅ‚uga instalacji kamery dla mobile
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      // Dodatkowe uprawnienia kamery dla mobile
      const constraints = {
        video: {
          facingMode: 'user',
          width: { ideal: 640 },
          height: { ideal: 480 }
        }
      };
    }
  </script>

</body>
</html>
